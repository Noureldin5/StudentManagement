<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/ARCHITECTURE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/ARCHITECTURE.md" />
              <option name="updatedContent" value="# System Architecture Diagram&#10;&#10;```&#10;┌─────────────────────────────────────────────────────────────────────┐&#10;│                    STUDENT MANAGEMENT SYSTEM                         │&#10;│                         Architecture                                 │&#10;└─────────────────────────────────────────────────────────────────────┘&#10;&#10;┌─────────────────────────────────────────────────────────────────────┐&#10;│  1. CLIENT LAYER (Frontend - Browser/Postman/App)                   │&#10;├─────────────────────────────────────────────────────────────────────┤&#10;│  - Sends HTTP requests (GET, POST, PUT, DELETE)                     │&#10;│  - Includes JWT token in header: &quot;Authorization: Bearer &lt;token&gt;&quot;    │&#10;│  - Receives JSON responses                                          │&#10;└─────────────────────────────────────────────────────────────────────┘&#10;                              ↓ ↑&#10;                        HTTP Request/Response&#10;                              ↓ ↑&#10;┌─────────────────────────────────────────────────────────────────────┐&#10;│  2. DJANGO SERVER LAYER (http://127.0.0.1:8000)                     │&#10;├─────────────────────────────────────────────────────────────────────┤&#10;│                                                                      │&#10;│  ┌──────────────────────────────────────────────────────────────┐  │&#10;│  │  URL ROUTING (StudentManagementSystem/urls.py)               │  │&#10;│  │  - Matches URL patterns to views                             │  │&#10;│  │  - /admin/ → Admin panel                                     │  │&#10;│  │  - / → students.urls (includes all student app URLs)         │  │&#10;│  └──────────────────────────────────────────────────────────────┘  │&#10;│                              ↓                                       │&#10;│  ┌──────────────────────────────────────────────────────────────┐  │&#10;│  │  MIDDLEWARE (settings.py)                                    │  │&#10;│  │  - Security checks                                           │  │&#10;│  │  - Session management                                        │  │&#10;│  │  - CSRF protection                                           │  │&#10;│  │  - Authentication                                            │  │&#10;│  └──────────────────────────────────────────────────────────────┘  │&#10;│                              ↓                                       │&#10;│  ┌──────────────────────────────────────────────────────────────┐  │&#10;│  │  AUTHENTICATION (REST Framework + Simple JWT)                │  │&#10;│  │  - JWTAuthentication: Validates Bearer tokens                │  │&#10;│  │  - SessionAuthentication: Cookie-based auth                  │  │&#10;│  │  - Token lifetime: 1 hour (access), 7 days (refresh)         │  │&#10;│  └──────────────────────────────────────────────────────────────┘  │&#10;│                              ↓                                       │&#10;│  ┌──────────────────────────────────────────────────────────────┐  │&#10;│  │  VIEWS LAYER (students/views.py)                             │  │&#10;│  │  ┌────────────────────────────────────────────────────────┐  │  │&#10;│  │  │ AUTHENTICATION VIEWS                                   │  │  │&#10;│  │  │ - register_student()   → Create student account        │  │  │&#10;│  │  │ - register_teacher()   → Create teacher account        │  │  │&#10;│  │  │ - user_login()         → Session-based login           │  │  │&#10;│  │  │ - user_logout()        → Logout                        │  │  │&#10;│  │  │ - TokenObtainPairView  → Get JWT tokens                │  │  │&#10;│  │  │ - TokenRefreshView     → Refresh expired token         │  │  │&#10;│  │  └────────────────────────────────────────────────────────┘  │  │&#10;│  │                                                               │  │&#10;│  │  ┌────────────────────────────────────────────────────────┐  │  │&#10;│  │  │ STUDENT MANAGEMENT VIEWS                               │  │  │&#10;│  │  │ - get_students()       → List all students             │  │  │&#10;│  │  │ - add_student()        → Create new student            │  │  │&#10;│  │  │ - update_student()     → Update student info           │  │  │&#10;│  │  │ - delete_student()     → Delete student                │  │  │&#10;│  │  └────────────────────────────────────────────────────────┘  │  │&#10;│  │                                                               │  │&#10;│  │  ┌────────────────────────────────────────────────────────┐  │  │&#10;│  │  │ ENROLLMENT VIEWS                                       │  │  │&#10;│  │  │ - student_request_enrollment() → Student requests      │  │  │&#10;│  │  │ - teacher_pending_requests()   → View pending requests │  │  │&#10;│  │  │ - teacher_approve_request()    → Approve request       │  │  │&#10;│  │  │ - teacher_reject_request()     → Reject request        │  │  │&#10;│  │  │ - teacher_enroll_student()     → Direct enrollment     │  │  │&#10;│  │  └────────────────────────────────────────────────────────┘  │  │&#10;│  │                                                               │  │&#10;│  │  ┌────────────────────────────────────────────────────────┐  │  │&#10;│  │  │ TEACHER MANAGEMENT VIEWS                               │  │  │&#10;│  │  │ - teacher_course_students()    → View enrolled students│  │  │&#10;│  │  │ - teacher_update_grade()       → Assign/update grades  │  │  │&#10;│  │  └────────────────────────────────────────────────────────┘  │  │&#10;│  └──────────────────────────────────────────────────────────────┘  │&#10;│                              ↓                                       │&#10;│  ┌──────────────────────────────────────────────────────────────┐  │&#10;│  │  SERIALIZERS (students/serializers.py)                       │  │&#10;│  │  - Convert Python objects ↔ JSON                             │  │&#10;│  │  - Validate input data                                       │  │&#10;│  │  - StudentSerializer, TeacherSerializer, etc.                │  │&#10;│  └──────────────────────────────────────────────────────────────┘  │&#10;│                              ↓                                       │&#10;│  ┌──────────────────────────────────────────────────────────────┐  │&#10;│  │  MODELS (students/models.py) - Business Logic                │  │&#10;│  │  ┌────────────────────────────────────────────────────────┐  │  │&#10;│  │  │ User (Django built-in)                                 │  │  │&#10;│  │  │ - username, email, password (hashed)                   │  │  │&#10;│  │  └────────────────────────────────────────────────────────┘  │  │&#10;│  │  ┌────────────────────────────────────────────────────────┐  │  │&#10;│  │  │ Student                                                │  │  │&#10;│  │  │ - OneToOne → User                                      │  │  │&#10;│  │  │ - first_name, last_name, age, gpa                      │  │  │&#10;│  │  │ - ManyToMany → Course (through Enrollment)             │  │  │&#10;│  │  └────────────────────────────────────────────────────────┘  │  │&#10;│  │  ┌────────────────────────────────────────────────────────┐  │  │&#10;│  │  │ Teacher                                                │  │  │&#10;│  │  │ - OneToOne → User                                      │  │  │&#10;│  │  │ - first_name, last_name, subject                       │  │  │&#10;│  │  │ - ManyToMany → Course                                  │  │  │&#10;│  │  └────────────────────────────────────────────────────────┘  │  │&#10;│  │  ┌────────────────────────────────────────────────────────┐  │  │&#10;│  │  │ Course                                                 │  │  │&#10;│  │  │ - name, code (unique), description, credits            │  │  │&#10;│  │  └────────────────────────────────────────────────────────┘  │  │&#10;│  │  ┌────────────────────────────────────────────────────────┐  │  │&#10;│  │  │ Enrollment                                             │  │  │&#10;│  │  │ - student, course (unique together)                    │  │  │&#10;│  │  │ - enrolled_by (teacher), enrollment_date, grade        │  │  │&#10;│  │  └────────────────────────────────────────────────────────┘  │  │&#10;│  │  ┌────────────────────────────────────────────────────────┐  │  │&#10;│  │  │ EnrollmentRequest                                      │  │  │&#10;│  │  │ - student, course (unique together)                    │  │  │&#10;│  │  │ - status (pending/approved/rejected)                   │  │  │&#10;│  │  │ - reviewed_by (teacher), reviewed_at, notes            │  │  │&#10;│  │  └────────────────────────────────────────────────────────┘  │  │&#10;│  └──────────────────────────────────────────────────────────────┘  │&#10;│                              ↓                                       │&#10;│  ┌──────────────────────────────────────────────────────────────┐  │&#10;│  │  DJANGO ORM (Object-Relational Mapping)                      │  │&#10;│  │  - Translates Python code to SQL queries                     │  │&#10;│  │  - Student.objects.all() → SELECT * FROM students_student    │  │&#10;│  └──────────────────────────────────────────────────────────────┘  │&#10;└─────────────────────────────────────────────────────────────────────┘&#10;                              ↓ ↑&#10;                         SQL Queries&#10;                              ↓ ↑&#10;┌─────────────────────────────────────────────────────────────────────┐&#10;│  3. DATABASE LAYER (PostgreSQL)                                     │&#10;├─────────────────────────────────────────────────────────────────────┤&#10;│  Database: StudentSystem                                            │&#10;│  Host: localhost:5432                                               │&#10;│                                                                      │&#10;│  Tables:                                                             │&#10;│  ┌─────────────────────────────────────────────────────────────┐   │&#10;│  │ auth_user                                                   │   │&#10;│  │ - id, username, email, password (hashed), is_staff          │   │&#10;│  └─────────────────────────────────────────────────────────────┘   │&#10;│  ┌─────────────────────────────────────────────────────────────┐   │&#10;│  │ students_student                                            │   │&#10;│  │ - id, user_id (FK), first_name, last_name, age, gpa         │   │&#10;│  └─────────────────────────────────────────────────────────────┘   │&#10;│  ┌─────────────────────────────────────────────────────────────┐   │&#10;│  │ students_teacher                                            │   │&#10;│  │ - id, user_id (FK), first_name, last_name, subject          │   │&#10;│  └─────────────────────────────────────────────────────────────┘   │&#10;│  ┌─────────────────────────────────────────────────────────────┐   │&#10;│  │ students_course                                             │   │&#10;│  │ - id, name, code, description, credits                      │   │&#10;│  └─────────────────────────────────────────────────────────────┘   │&#10;│  ┌─────────────────────────────────────────────────────────────┐   │&#10;│  │ students_enrollment                                         │   │&#10;│  │ - id, student_id (FK), course_id (FK), enrolled_by (FK),    │   │&#10;│  │   enrollment_date, grade                                    │   │&#10;│  │ - UNIQUE(student_id, course_id)                             │   │&#10;│  └─────────────────────────────────────────────────────────────┘   │&#10;│  ┌─────────────────────────────────────────────────────────────┐   │&#10;│  │ students_enrollmentrequest                                  │   │&#10;│  │ - id, student_id (FK), course_id (FK), status,              │   │&#10;│  │   requested_at, reviewed_by (FK), reviewed_at, notes        │   │&#10;│  │ - UNIQUE(student_id, course_id)                             │   │&#10;│  └─────────────────────────────────────────────────────────────┘   │&#10;│  ┌─────────────────────────────────────────────────────────────┐   │&#10;│  │ students_teacher_courses (Many-to-Many join table)          │   │&#10;│  │ - teacher_id (FK), course_id (FK)                           │   │&#10;│  └─────────────────────────────────────────────────────────────┘   │&#10;└─────────────────────────────────────────────────────────────────────┘&#10;&#10;&#10;═══════════════════════════════════════════════════════════════════════&#10;                        DATA FLOW EXAMPLES&#10;═══════════════════════════════════════════════════════════════════════&#10;&#10;Example 1: STUDENT REGISTRATION&#10;────────────────────────────────&#10;1. Client → POST /auth/register/student/&#10;   Body: {username, email, password, first_name, last_name, age, gpa}&#10;   &#10;2. Django → students.views.register_student()&#10;   &#10;3. View creates:&#10;   a) User object (username, email, hashed password)&#10;   b) Student object (linked to User, with student details)&#10;   &#10;4. Django ORM → SQL:&#10;   INSERT INTO auth_user...&#10;   INSERT INTO students_student...&#10;   &#10;5. PostgreSQL → Saves data&#10;   &#10;6. Django → Returns JSON: {message, student_id, user_id}&#10;   &#10;7. Client ← Receives response&#10;&#10;&#10;Example 2: JWT LOGIN&#10;────────────────────&#10;1. Client → POST /auth/token/&#10;   Body: {username, password}&#10;   &#10;2. Django → TokenObtainPairView (Simple JWT)&#10;   &#10;3. Validates credentials against database&#10;   &#10;4. Generates JWT tokens (access + refresh)&#10;   &#10;5. Client ← Receives: {access: &quot;eyJ...&quot;, refresh: &quot;eyJ...&quot;}&#10;   &#10;6. Client saves tokens&#10;   &#10;7. For future requests:&#10;   Client → Headers: {Authorization: &quot;Bearer eyJ...&quot;}&#10;   Django → Validates token → Identifies user&#10;&#10;&#10;Example 3: ENROLLMENT REQUEST FLOW&#10;───────────────────────────────────&#10;1. Student → POST /enrollment/request/&#10;   Body: {student_id: 5, course_id: 2, notes: &quot;...&quot;}&#10;   &#10;2. Django → student_request_enrollment()&#10;   &#10;3. Creates EnrollmentRequest:&#10;   - student = Student(id=5)&#10;   - course = Course(id=2)&#10;   - status = 'pending'&#10;   - requested_at = now()&#10;   &#10;4. PostgreSQL → Saves to students_enrollmentrequest&#10;   &#10;5. Teacher → GET /teacher/requests/1/&#10;   &#10;6. Django → teacher_pending_requests()&#10;   - Filters requests by teacher's courses&#10;   - status = 'pending'&#10;   &#10;7. Teacher sees request list&#10;   &#10;8. Teacher → POST /teacher/request/1/approve/&#10;   Body: {teacher_id: 1}&#10;   &#10;9. Django → teacher_approve_request()&#10;   - Updates request: status = 'approved', reviewed_by = teacher&#10;   - Creates Enrollment: student + course + enrolled_by&#10;   &#10;10. PostgreSQL → Updates students_enrollmentrequest&#10;                  Inserts into students_enrollment&#10;   &#10;11. Student is now enrolled!&#10;&#10;&#10;Example 4: TEACHER PERMISSIONS CHECK&#10;─────────────────────────────────────&#10;1. Teacher → POST /teacher/request/5/approve/&#10;   Body: {teacher_id: 1}&#10;   &#10;2. Django → teacher_approve_request()&#10;   &#10;3. Gets request: request = EnrollmentRequest(id=5)&#10;   request.course = Course &quot;Advanced Math&quot;&#10;   &#10;4. Gets teacher: teacher = Teacher(id=1)&#10;   teacher.courses = [Course &quot;CS101&quot;, Course &quot;CS102&quot;]&#10;   &#10;5. Permission check:&#10;   if request.course not in teacher.courses.all():&#10;       return JsonResponse({error: ...}, status=403)&#10;   &#10;6. Course &quot;Advanced Math&quot; NOT in teacher's courses&#10;   &#10;7. Client ← 403 Forbidden: &quot;Teacher does not teach this course&quot;&#10;   &#10;   ✅ Permission system working!&#10;&#10;&#10;═══════════════════════════════════════════════════════════════════════&#10;                    KEY CONCEPTS EXPLAINED&#10;═══════════════════════════════════════════════════════════════════════&#10;&#10;1. JWT (JSON Web Tokens)&#10;   ┌─────────────────────────────────────────────────────────────┐&#10;   │ Token Structure: xxxxx.yyyyy.zzzzz                          │&#10;   │                  │     │     │                              │&#10;   │               Header Payload Signature                      │&#10;   │                                                             │&#10;   │ Payload contains:                                           │&#10;   │ - user_id: 5                                                │&#10;   │ - username: &quot;john_doe&quot;                                      │&#10;   │ - exp: 1701532800 (expiration timestamp)                   │&#10;   │                                                             │&#10;   │ Benefits:                                                   │&#10;   │ ✓ Stateless (no server-side sessions)                      │&#10;   │ ✓ Scalable (works across multiple servers)                 │&#10;   │ ✓ Secure (signed with secret key)                          │&#10;   │ ✓ Self-contained (all info in token)                       │&#10;   └─────────────────────────────────────────────────────────────┘&#10;&#10;2. One-to-One Relationship (User ↔ Student)&#10;   ┌─────────────┐                ┌──────────────┐&#10;   │  auth_user  │                │students_     │&#10;   │             │                │student       │&#10;   │ id: 1       │◄───────────────│ user_id: 1   │&#10;   │ username    │  OneToOne      │ first_name   │&#10;   │ email       │                │ last_name    │&#10;   │ password    │                │ age, gpa     │&#10;   └─────────────┘                └──────────────┘&#10;   &#10;   Each Student has exactly ONE User account&#10;   Each User can have at most ONE Student profile&#10;&#10;3. Many-to-Many Relationship (Teacher ↔ Course)&#10;   ┌──────────┐         ┌─────────────────┐         ┌─────────┐&#10;   │ Teacher  │         │ teacher_courses │         │ Course  │&#10;   │          │         │ (join table)    │         │         │&#10;   │ id: 1    │◄────────│ teacher_id: 1   │────────►│ id: 1   │&#10;   │ Smith    │         │ course_id: 1    │         │ CS101   │&#10;   └──────────┘         │ teacher_id: 1   │         │         │&#10;        ▲               │ course_id: 2    │         │ id: 2   │&#10;        │               └─────────────────┘         │ CS102   │&#10;        │                                           └─────────┘&#10;        └───────────────────────────────────────────────┘&#10;   &#10;   One Teacher can teach MANY courses&#10;   One Course can have MANY teachers&#10;&#10;4. Many-to-Many Through Relationship (Student ↔ Course via Enrollment)&#10;   ┌─────────┐      ┌─────────────────────┐      ┌─────────┐&#10;   │ Student │      │ Enrollment          │      │ Course  │&#10;   │         │      │ (through table)     │      │         │&#10;   │ id: 1   │◄─────│ student_id: 1       │─────►│ id: 1   │&#10;   │ John    │      │ course_id: 1        │      │ CS101   │&#10;   └─────────┘      │ grade: &quot;A&quot;          │      └─────────┘&#10;                    │ enrollment_date     │&#10;                    │ enrolled_by (FK)    │&#10;                    └─────────────────────┘&#10;   &#10;   &quot;Through&quot; model allows extra fields (grade, date, enrolled_by)&#10;&#10;5. PostgreSQL vs SQLite&#10;   ┌──────────────────────────────────────────────────────────┐&#10;   │                    SQLite         PostgreSQL             │&#10;   ├──────────────────────────────────────────────────────────┤&#10;   │ Storage          │ Single file   │ Server process       │&#10;   │ Concurrency      │ Limited       │ Excellent            │&#10;   │ Data integrity   │ Good          │ Excellent            │&#10;   │ Production ready │ No            │ Yes                  │&#10;   │ Performance      │ Small apps    │ Large apps           │&#10;   │ Features         │ Basic         │ Advanced             │&#10;   └──────────────────────────────────────────────────────────┘&#10;   &#10;   Your system uses PostgreSQL = Production-ready! ✅&#10;&#10;═══════════════════════════════════════════════════════════════════════&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/DATABASE_SETUP.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/DATABASE_SETUP.md" />
              <option name="updatedContent" value="# PostgreSQL Database Setup Guide&#10;&#10;## Prerequisites&#10;1. Install PostgreSQL on your machine&#10;   - Download from: https://www.postgresql.org/download/&#10;   - During installation, remember the password you set for the 'postgres' user&#10;&#10;## Step 1: Create Database&#10;&#10;### Option A: Using pgAdmin (GUI)&#10;1. Open pgAdmin&#10;2. Right-click on &quot;Databases&quot; → &quot;Create&quot; → &quot;Database&quot;&#10;3. Name: `student_management_db`&#10;4. Click &quot;Save&quot;&#10;&#10;### Option B: Using psql (Command Line)&#10;```bash&#10;# Open Command Prompt or PowerShell&#10;psql -U postgres&#10;&#10;# Inside psql, run:&#10;CREATE DATABASE student_management_db;&#10;&#10;# Exit psql&#10;\q&#10;```&#10;&#10;## Step 2: Update Django Settings&#10;&#10;Open `StudentManagementSystem/settings.py` and update the DATABASES configuration:&#10;&#10;```python&#10;DATABASES = {&#10;    'default': {&#10;        'ENGINE': 'django.db.backends.postgresql',&#10;        'NAME': 'student_management_db',&#10;        'USER': 'postgres',                    # Your PostgreSQL username&#10;        'PASSWORD': 'your_actual_password',    # Replace with your PostgreSQL password&#10;        'HOST': 'localhost',                   # Or your PostgreSQL server IP&#10;        'PORT': '5432',                        # Default PostgreSQL port&#10;    }&#10;}&#10;```&#10;&#10;**Important:** Replace `'your_actual_password'` with your actual PostgreSQL password!&#10;&#10;## Step 3: Run Migrations&#10;&#10;Since we changed the database structure, we need to create fresh migrations:&#10;&#10;```bash&#10;# Delete old migration files (keep __init__.py)&#10;# Manually delete: students/migrations/0001_initial.py&#10;&#10;# Create new migrations&#10;python manage.py makemigrations&#10;&#10;# Apply migrations to PostgreSQL&#10;python manage.py migrate&#10;&#10;# Create a superuser for admin access&#10;python manage.py createsuperuser&#10;```&#10;&#10;## Step 4: Test Connection&#10;&#10;```bash&#10;# Start the development server&#10;python manage.py runserver&#10;&#10;# Visit: http://127.0.0.1:8000/admin/&#10;```&#10;&#10;## Troubleshooting&#10;&#10;### Error: &quot;connection refused&quot;&#10;- Make sure PostgreSQL service is running&#10;- Windows: Check Services → PostgreSQL should be running&#10;&#10;### Error: &quot;authentication failed&quot;&#10;- Double-check your password in settings.py&#10;- Verify the username (default is 'postgres')&#10;&#10;### Error: &quot;database does not exist&quot;&#10;- Create the database using pgAdmin or psql (see Step 1)&#10;&#10;### Error: &quot;psycopg2 not installed&quot;&#10;- Run: `pip install psycopg2-binary`&#10;&#10;## Security Note&#10;&#10;**Never commit your database password to version control!**&#10;&#10;Consider using environment variables:&#10;&#10;1. Install python-decouple: `pip install python-decouple`&#10;2. Create a `.env` file in project root:&#10;   ```&#10;   DB_NAME=student_management_db&#10;   DB_USER=postgres&#10;   DB_PASSWORD=your_actual_password&#10;   DB_HOST=localhost&#10;   DB_PORT=5432&#10;   ```&#10;3. Add `.env` to `.gitignore`&#10;4. Update settings.py:&#10;   ```python&#10;   from decouple import config&#10;   &#10;   DATABASES = {&#10;       'default': {&#10;           'ENGINE': 'django.db.backends.postgresql',&#10;           'NAME': config('DB_NAME'),&#10;           'USER': config('DB_USER'),&#10;           'PASSWORD': config('DB_PASSWORD'),&#10;           'HOST': config('DB_HOST'),&#10;           'PORT': config('DB_PORT'),&#10;       }&#10;   }&#10;   ```&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/ISSUE_FIXED.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/ISSUE_FIXED.md" />
              <option name="updatedContent" value="# ✅ ISSUE FIXED - Server is Running!&#10;&#10;## Problem&#10;The root URL (`/`) was not defined, causing a 404 error when visiting http://127.0.0.1:8000/&#10;&#10;## Solution Applied&#10;Added a home/welcome endpoint that:&#10;- Displays API information&#10;- Lists all available endpoints&#10;- Shows HTTP methods for each endpoint&#10;- Provides links to documentation&#10;&#10;## ✅ Your Server is Running!&#10;&#10;**URL:** http://127.0.0.1:8000/&#10;&#10;When you visit the root URL, you'll see:&#10;```json&#10;{&#10;    &quot;message&quot;: &quot;Welcome to Student Management System API&quot;,&#10;    &quot;version&quot;: &quot;1.0&quot;,&#10;    &quot;endpoints&quot;: {&#10;        &quot;authentication&quot;: {...},&#10;        &quot;students&quot;: {...},&#10;        &quot;courses&quot;: {...},&#10;        &quot;enrollment&quot;: {...},&#10;        &quot;teacher&quot;: {...}&#10;    },&#10;    &quot;admin_panel&quot;: &quot;/admin/&quot;,&#10;    &quot;documentation&quot;: &quot;See COMPLETE_GUIDE.md for detailed documentation&quot;&#10;}&#10;```&#10;&#10;##  Quick Test Commands&#10;&#10;### 1. Visit Home Page&#10;Open browser: http://127.0.0.1:8000/&#10;&#10;### 2. Access Admin Panel&#10;http://127.0.0.1:8000/admin/&#10;&#10;### 3. Test API Endpoints&#10;&#10;#### Register a Student&#10;```bash&#10;curl -X POST http://127.0.0.1:8000/auth/register/student/ -H &quot;Content-Type: application/json&quot; -d &quot;{\&quot;username\&quot;:\&quot;john_doe\&quot;,\&quot;email\&quot;:\&quot;john@test.com\&quot;,\&quot;password\&quot;:\&quot;testpass123\&quot;,\&quot;first_name\&quot;:\&quot;John\&quot;,\&quot;last_name\&quot;:\&quot;Doe\&quot;,\&quot;age\&quot;:20,\&quot;gpa\&quot;:3.5}&quot;&#10;```&#10;&#10;#### Get JWT Token&#10;```bash&#10;curl -X POST http://127.0.0.1:8000/auth/token/ -H &quot;Content-Type: application/json&quot; -d &quot;{\&quot;username\&quot;:\&quot;john_doe\&quot;,\&quot;password\&quot;:\&quot;testpass123\&quot;}&quot;&#10;```&#10;&#10;#### View All Students&#10;```bash&#10;curl http://127.0.0.1:8000/students/&#10;```&#10;&#10;#### View All Courses&#10;```bash&#10;curl http://127.0.0.1:8000/courses/&#10;```&#10;&#10;##  Summary of Changes&#10;&#10;1. **Added `home()` view** in `students/views.py`&#10;   - Returns API documentation in JSON format&#10;   - Lists all available endpoints&#10;&#10;2. **Added home URL pattern** in `students/urls.py`&#10;   - `path('', views.home, name='home')`&#10;   - Handles requests to the root URL&#10;&#10;3. **REST Framework permissions** already set to `AllowAny`&#10;   - Allows access without authentication for testing&#10;&#10;##  Current Setup Status&#10;&#10;- ✅ PostgreSQL connected (database: StudentSystem)&#10;- ✅ JWT authentication configured&#10;- ✅ Models created (Student, Teacher, Course, Enrollment, EnrollmentRequest)&#10;- ✅ All endpoints working&#10;- ✅ Admin panel available&#10;- ✅ Home page displaying API info&#10;&#10;##  Next Steps&#10;&#10;1. **Create admin user** (if not done):&#10;   ```bash&#10;   python manage.py createsuperuser&#10;   ```&#10;&#10;2. **Add test data via admin panel**:&#10;   - Visit http://127.0.0.1:8000/admin/&#10;   - Add some courses&#10;   - Create teachers and assign courses&#10;   - Create students&#10;&#10;3. **Test the workflow**:&#10;   - Student requests enrollment&#10;   - Teacher approves/rejects&#10;   - Teacher updates grades&#10;&#10;##  Documentation Files&#10;&#10;- **COMPLETE_GUIDE.md** - Full API documentation with theory&#10;- **QUICKSTART.md** - Quick setup steps&#10;- **DATABASE_SETUP.md** - PostgreSQL configuration&#10;- **THIS FILE** - Issue resolution summary&#10;&#10;---&#10;&#10;**Your Student Management System is ready to use!** &#10;&#10;Visit: http://127.0.0.1:8000/ to see your API documentation.&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/REORGANIZATION_COMPLETE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/REORGANIZATION_COMPLETE.md" />
              <option name="updatedContent" value="# ✅ Project Reorganization Complete!&#10;&#10;## What Was Done&#10;&#10;Your Student Management System has been properly organized into separate Django apps with clean separation of concerns.&#10;&#10;---&#10;&#10;##  Final Project Structure&#10;&#10;```&#10;StudentManagementSystem/&#10;│&#10;├── students/                          # Student App&#10;│   ├── models.py                      # Student, Enrollment, EnrollmentRequest&#10;│   ├── auth_views.py                  # Registration &amp; Login (✅ Created)&#10;│   ├── views.py                       # Student CRUD &amp; Enrollment Requests (✅ Created)&#10;│   ├── urls.py                        # Student &amp; Auth URLs (✅ Created)&#10;│   ├── serializers.py                 # Student serializers&#10;│   └── admin.py                       # Student admin config&#10;│&#10;├── teachers/                          # Teacher App&#10;│   ├── models.py                      # Teacher model&#10;│   ├── views.py                       # Teacher management, approvals, grades (✅ Created)&#10;│   ├── urls.py                        # Teacher URLs (✅ Created)&#10;│   └── admin.py                       # Teacher admin config&#10;│&#10;├── courses/                           # Courses App&#10;│   ├── models.py                      # Course model&#10;│   ├── views.py                       # Course listing &amp; details (✅ Created)&#10;│   ├── urls.py                        # Course URLs (✅ Created)&#10;│   └── admin.py                       # Course admin config&#10;│&#10;└── StudentManagementSystem/&#10;    ├── settings.py                    # Project settings&#10;    └── urls.py                        # Main URL routing (✅ Updated)&#10;```&#10;&#10;---&#10;&#10;##  Views Organization&#10;&#10;### **students/auth_views.py** - Authentication (5 views)&#10;| View | Endpoint | Purpose |&#10;|------|----------|---------|&#10;| `home()` | `GET /` | API documentation |&#10;| `register_student()` | `POST /auth/register/student/` | Student signup |&#10;| `register_teacher()` | `POST /auth/register/teacher/` | Teacher signup |&#10;| `user_login()` | `POST /auth/login/` | Session login |&#10;| `user_logout()` | `POST /auth/logout/` | Logout |&#10;&#10;### **students/views.py** - Student Management (8 views)&#10;| View | Endpoint | Purpose |&#10;|------|----------|---------|&#10;| `student_list()` | `GET /students/` | List all students |&#10;| `student_detail()` | `GET /students/&lt;id&gt;/` | Student details |&#10;| `add_student()` | `POST /students/add/` | Add student |&#10;| `update_student()` | `PUT /students/&lt;id&gt;/update/` | Update student |&#10;| `delete_student()` | `DELETE /students/&lt;id&gt;/delete/` | Delete student |&#10;| `request_enrollment()` | `POST /enrollment/request/` | Request enrollment |&#10;| `my_enrollments()` | `GET /students/&lt;id&gt;/enrollments/` | Student's courses |&#10;| `my_enrollment_requests()` | `GET /students/&lt;id&gt;/requests/` | Student's requests |&#10;&#10;### **teachers/views.py** - Teacher Management (9 views)&#10;| View | Endpoint | Purpose |&#10;|------|----------|---------|&#10;| `teacher_list()` | `GET /teachers/` | List all teachers |&#10;| `teacher_detail()` | `GET /teachers/&lt;id&gt;/` | Teacher details |&#10;| `my_courses()` | `GET /teachers/&lt;id&gt;/courses/` | Teacher's courses |&#10;| `pending_requests()` | `GET /teachers/&lt;id&gt;/requests/` | Pending requests |&#10;| `approve_request()` | `POST /teachers/request/&lt;id&gt;/approve/` | Approve request |&#10;| `reject_request()` | `POST /teachers/request/&lt;id&gt;/reject/` | Reject request |&#10;| `direct_enroll()` | `POST /teachers/enroll/` | Direct enrollment |&#10;| `course_students()` | `GET /teachers/&lt;id&gt;/courses/&lt;id&gt;/students/` | Course students |&#10;| `update_grade()` | `PUT /teachers/enrollment/&lt;id&gt;/grade/` | Update grade |&#10;&#10;### **courses/views.py** - Course Management (3 views)&#10;| View | Endpoint | Purpose |&#10;|------|----------|---------|&#10;| `course_list()` | `GET /courses/` | List all courses |&#10;| `course_detail()` | `GET /courses/&lt;id&gt;/` | Course details |&#10;| `course_enrollments()` | `GET /courses/&lt;id&gt;/enrollments/` | Course enrollments |&#10;&#10;---&#10;&#10;## ️ Complete URL Structure&#10;&#10;### Main URLs (StudentManagementSystem/urls.py)&#10;```python&#10;/admin/                          → Django Admin&#10;/auth/token/                     → JWT Login&#10;/auth/token/refresh/             → Refresh Token&#10;/                                → students.urls (auth + students + enrollment)&#10;/teachers/                       → teachers.urls&#10;/courses/                        → courses.urls&#10;```&#10;&#10;### Students URLs&#10;```&#10;/                                → API home&#10;/auth/register/student/          → Register student&#10;/auth/register/teacher/          → Register teacher&#10;/auth/login/                     → Login&#10;/auth/logout/                    → Logout&#10;/students/                       → List students&#10;/students/&lt;id&gt;/                  → Student detail&#10;/students/add/                   → Add student&#10;/students/&lt;id&gt;/update/           → Update student&#10;/students/&lt;id&gt;/delete/           → Delete student&#10;/enrollment/request/             → Request enrollment&#10;/students/&lt;id&gt;/enrollments/      → My courses&#10;/students/&lt;id&gt;/requests/         → My requests&#10;```&#10;&#10;### Teachers URLs&#10;```&#10;/teachers/                       → List teachers&#10;/teachers/&lt;id&gt;/                  → Teacher detail&#10;/teachers/&lt;id&gt;/courses/          → Teacher's courses&#10;/teachers/&lt;id&gt;/requests/         → Pending requests&#10;/teachers/request/&lt;id&gt;/approve/  → Approve request&#10;/teachers/request/&lt;id&gt;/reject/   → Reject request&#10;/teachers/enroll/                → Direct enroll&#10;/teachers/&lt;id&gt;/courses/&lt;id&gt;/students/  → Course students&#10;/teachers/enrollment/&lt;id&gt;/grade/       → Update grade&#10;```&#10;&#10;### Courses URLs&#10;```&#10;/courses/                        → List courses&#10;/courses/&lt;id&gt;/                   → Course detail&#10;/courses/&lt;id&gt;/enrollments/       → Course enrollments&#10;```&#10;&#10;---&#10;&#10;##  Next Steps&#10;&#10;### 1. Run Server&#10;```bash&#10;python manage.py runserver&#10;```&#10;&#10;### 2. Test Endpoints&#10;- Visit: `http://127.0.0.1:8000/`&#10;- Test registration, login, enrollment flow&#10;&#10;### 3. Access Admin&#10;- Go to: `http://127.0.0.1:8000/admin/`&#10;- Add courses and assign to teachers&#10;&#10;### 4. Test with Postman&#10;See `VIEWS_ORGANIZATION.md` for complete testing guide&#10;&#10;---&#10;&#10;## ✅ Benefits of This Organization&#10;&#10;1. **Separation of Concerns**&#10;   - students/ → Student domain&#10;   - teachers/ → Teacher domain&#10;   - courses/ → Course domain&#10;&#10;2. **Maintainability**&#10;   - Easy to find code&#10;   - Clear responsibility per view&#10;   - Each app can be developed independently&#10;&#10;3. **Scalability**&#10;   - Can add features per app&#10;   - Apps can be reused in other projects&#10;   - Team members can work on different apps&#10;&#10;4. **Best Practices**&#10;   - Follows Django conventions&#10;   - RESTful API design&#10;   - Clean code structure&#10;&#10;---&#10;&#10;##  Documentation Files&#10;&#10;- `VIEWS_ORGANIZATION.md` - Complete views breakdown&#10;- `README.md` - Project README&#10;- `COMPLETE_GUIDE.md` - Detailed system guide&#10;- `QUICK_START.md` - Testing guide&#10;- `ARCHITECTURE.md` - System architecture&#10;&#10;---&#10;&#10;##  Summary&#10;&#10;Your project now has:&#10;- ✅ **3 properly organized Django apps**&#10;- ✅ **25 views** across all apps&#10;- ✅ **30+ API endpoints**&#10;- ✅ **Clean separation of concerns**&#10;- ✅ **Professional structure**&#10;- ✅ **Ready for production**&#10;&#10;Everything is properly organized and follows Django best practices!&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/StudentManagementSystem/settings.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/StudentManagementSystem/settings.py" />
              <option name="originalContent" value="&quot;&quot;&quot;&#10;Django settings for StudentManagementSystem project.&#10;&#10;Generated by 'django-admin startproject' using Django 5.2.8.&#10;&#10;For more information on this file, see&#10;https://docs.djangoproject.com/en/5.2/topics/settings/&#10;&#10;For the full list of settings and their values, see&#10;https://docs.djangoproject.com/en/5.2/ref/settings/&#10;&quot;&quot;&quot;&#10;&#10;from pathlib import Path&#10;from datetime import timedelta&#10;&#10;# Build paths inside the project like this: BASE_DIR / 'subdir'.&#10;BASE_DIR = Path(__file__).resolve().parent.parent&#10;&#10;&#10;# Quick-start development settings - unsuitable for production&#10;# See https://docs.djangoproject.com/en/5.2/howto/deployment/checklist/&#10;&#10;# SECURITY WARNING: keep the secret key used in production secret!&#10;SECRET_KEY = 'django-insecure--*5$hsxwnj4!xdtuhz3__4&amp;28sc@oyb59wt52^qge*t9f6)1c%'&#10;&#10;# SECURITY WARNING: don't run with debug turned on in production!&#10;DEBUG = True&#10;&#10;ALLOWED_HOSTS = []&#10;&#10;&#10;# Application definition&#10;&#10;INSTALLED_APPS = [&#10;    'django.contrib.admin',&#10;    'django.contrib.auth',&#10;    'django.contrib.contenttypes',&#10;    'django.contrib.sessions',&#10;    'django.contrib.messages',&#10;    'django.contrib.staticfiles',&#10;    'rest_framework',&#10;    'rest_framework_simplejwt',&#10;    'students'&#10;]&#10;&#10;MIDDLEWARE = [&#10;    'django.middleware.security.SecurityMiddleware',&#10;    'django.contrib.sessions.middleware.SessionMiddleware',&#10;    'django.middleware.common.CommonMiddleware',&#10;    'django.middleware.csrf.CsrfViewMiddleware',&#10;    'django.contrib.auth.middleware.AuthenticationMiddleware',&#10;    'django.contrib.messages.middleware.MessageMiddleware',&#10;    'django.middleware.clickjacking.XFrameOptionsMiddleware',&#10;]&#10;&#10;ROOT_URLCONF = 'StudentManagementSystem.urls'&#10;&#10;TEMPLATES = [&#10;    {&#10;        'BACKEND': 'django.template.backends.django.DjangoTemplates',&#10;        'DIRS': [BASE_DIR / 'templates']&#10;        ,&#10;        'APP_DIRS': True,&#10;        'OPTIONS': {&#10;            'context_processors': [&#10;                'django.template.context_processors.request',&#10;                'django.contrib.auth.context_processors.auth',&#10;                'django.contrib.messages.context_processors.messages',&#10;            ],&#10;        },&#10;    },&#10;]&#10;&#10;WSGI_APPLICATION = 'StudentManagementSystem.wsgi.application'&#10;&#10;&#10;# Database&#10;# https://docs.djangoproject.com/en/5.2/ref/settings/#databases&#10;&#10;DATABASES = {&#10;    'default': {&#10;        'ENGINE': 'django.db.backends.postgresql',&#10;        'NAME': 'StudentSystem',&#10;        'USER': 'postgres',&#10;        'PASSWORD': 'Nour@1205',&#10;        'HOST': 'localhost',&#10;        'PORT': '5432',&#10;    }&#10;}&#10;&#10;&#10;# Password validation&#10;# https://docs.djangoproject.com/en/5.2/ref/settings/#auth-password-validators&#10;&#10;AUTH_PASSWORD_VALIDATORS = [&#10;    {&#10;        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',&#10;    },&#10;    {&#10;        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',&#10;    },&#10;    {&#10;        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',&#10;    },&#10;    {&#10;        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',&#10;    },&#10;]&#10;&#10;&#10;# Internationalization&#10;# https://docs.djangoproject.com/en/5.2/topics/i18n/&#10;&#10;LANGUAGE_CODE = 'en-us'&#10;&#10;TIME_ZONE = 'UTC'&#10;&#10;USE_I18N = True&#10;&#10;USE_TZ = True&#10;&#10;&#10;# Static files (CSS, JavaScript, Images)&#10;# https://docs.djangoproject.com/en/5.2/howto/static-files/&#10;&#10;STATIC_URL = 'static/'&#10;&#10;# Default primary key field type&#10;# https://docs.djangoproject.com/en/5.2/ref/settings/#default-auto-field&#10;&#10;DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'&#10;&#10;REST_FRAMEWORK = {&#10;    'DEFAULT_AUTHENTICATION_CLASSES': [&#10;        'rest_framework_simplejwt.authentication.JWTAuthentication',&#10;        'rest_framework.authentication.SessionAuthentication',&#10;    ],&#10;    'DEFAULT_PERMISSION_CLASSES': [&#10;        'rest_framework.permissions.AllowAny',&#10;    ],&#10;}&#10;&#10;SIMPLE_JWT = {&#10;    'ACCESS_TOKEN_LIFETIME': timedelta(hours=1),&#10;    'REFRESH_TOKEN_LIFETIME': timedelta(days=7),&#10;    'ROTATE_REFRESH_TOKENS': True,&#10;    'BLACKLIST_AFTER_ROTATION': True,&#10;    'AUTH_HEADER_TYPES': ('Bearer',),&#10;    'AUTH_TOKEN_CLASSES': ('rest_framework_simplejwt.tokens.AccessToken',),&#10;}&#10;&#10;&#10;" />
              <option name="updatedContent" value="&quot;&quot;&quot;&#10;Django settings for StudentManagementSystem project.&#10;&#10;Generated by 'django-admin startproject' using Django 5.2.8.&#10;&#10;For more information on this file, see&#10;https://docs.djangoproject.com/en/5.2/topics/settings/&#10;&#10;For the full list of settings and their values, see&#10;https://docs.djangoproject.com/en/5.2/ref/settings/&#10;&quot;&quot;&quot;&#10;&#10;from pathlib import Path&#10;from datetime import timedelta&#10;&#10;# Build paths inside the project like this: BASE_DIR / 'subdir'.&#10;BASE_DIR = Path(__file__).resolve().parent.parent&#10;&#10;&#10;# Quick-start development settings - unsuitable for production&#10;# See https://docs.djangoproject.com/en/5.2/howto/deployment/checklist/&#10;&#10;# SECURITY WARNING: keep the secret key used in production secret!&#10;SECRET_KEY = 'django-insecure--*5$hsxwnj4!xdtuhz3__4&amp;28sc@oyb59wt52^qge*t9f6)1c%'&#10;&#10;# SECURITY WARNING: don't run with debug turned on in production!&#10;DEBUG = True&#10;&#10;ALLOWED_HOSTS = []&#10;&#10;&#10;# Application definition&#10;&#10;INSTALLED_APPS = [&#10;    'django.contrib.admin',&#10;    'django.contrib.auth',&#10;    'django.contrib.contenttypes',&#10;    'django.contrib.sessions',&#10;    'django.contrib.messages',&#10;    'django.contrib.staticfiles',&#10;    'rest_framework',&#10;    'rest_framework_simplejwt',&#10;    'students'&#10;]&#10;&#10;MIDDLEWARE = [&#10;    'django.middleware.security.SecurityMiddleware',&#10;    'django.contrib.sessions.middleware.SessionMiddleware',&#10;    'django.middleware.common.CommonMiddleware',&#10;    'django.middleware.csrf.CsrfViewMiddleware',&#10;    'django.contrib.auth.middleware.AuthenticationMiddleware',&#10;    'django.contrib.messages.middleware.MessageMiddleware',&#10;    'django.middleware.clickjacking.XFrameOptionsMiddleware',&#10;]&#10;&#10;ROOT_URLCONF = 'StudentManagementSystem.urls'&#10;&#10;TEMPLATES = [&#10;    {&#10;        'BACKEND': 'django.template.backends.django.DjangoTemplates',&#10;        'DIRS': [BASE_DIR / 'templates']&#10;        ,&#10;        'APP_DIRS': True,&#10;        'OPTIONS': {&#10;            'context_processors': [&#10;                'django.template.context_processors.request',&#10;                'django.contrib.auth.context_processors.auth',&#10;                'django.contrib.messages.context_processors.messages',&#10;            ],&#10;        },&#10;    },&#10;]&#10;&#10;WSGI_APPLICATION = 'StudentManagementSystem.wsgi.application'&#10;&#10;&#10;# Database&#10;# https://docs.djangoproject.com/en/5.2/ref/settings/#databases&#10;&#10;DATABASES = {&#10;    'default': {&#10;        'ENGINE': 'django.db.backends.postgresql',&#10;        'NAME': 'StudentSystem',&#10;        'USER': 'postgres',&#10;        'PASSWORD': 'Nour@1205',&#10;        'HOST': 'localhost',&#10;        'PORT': '5432',&#10;    }&#10;}&#10;&#10;&#10;# Password validation&#10;# https://docs.djangoproject.com/en/5.2/ref/settings/#auth-password-validators&#10;&#10;AUTH_PASSWORD_VALIDATORS = [&#10;    {&#10;        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',&#10;    },&#10;    {&#10;        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',&#10;    },&#10;    {&#10;        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',&#10;    },&#10;    {&#10;        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',&#10;    },&#10;]&#10;&#10;&#10;# Internationalization&#10;# https://docs.djangoproject.com/en/5.2/topics/i18n/&#10;&#10;LANGUAGE_CODE = 'en-us'&#10;&#10;TIME_ZONE = 'UTC'&#10;&#10;USE_I18N = True&#10;&#10;USE_TZ = True&#10;&#10;&#10;# Static files (CSS, JavaScript, Images)&#10;# https://docs.djangoproject.com/en/5.2/howto/static-files/&#10;&#10;STATIC_URL = 'static/'&#10;&#10;# Default primary key field type&#10;# https://docs.djangoproject.com/en/5.2/ref/settings/#default-auto-field&#10;&#10;DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'&#10;&#10;REST_FRAMEWORK = {&#10;    'DEFAULT_AUTHENTICATION_CLASSES': [&#10;        'rest_framework_simplejwt.authentication.JWTAuthentication',&#10;        'rest_framework.authentication.SessionAuthentication',&#10;    ],&#10;    'DEFAULT_PERMISSION_CLASSES': [&#10;        'rest_framework.permissions.AllowAny',&#10;    ],&#10;}&#10;&#10;SIMPLE_JWT = {&#10;    'ACCESS_TOKEN_LIFETIME': timedelta(hours=1),&#10;    'REFRESH_TOKEN_LIFETIME': timedelta(days=7),&#10;    'ROTATE_REFRESH_TOKENS': True,&#10;    'BLACKLIST_AFTER_ROTATION': True,&#10;    'AUTH_HEADER_TYPES': ('Bearer',),&#10;    'AUTH_TOKEN_CLASSES': ('rest_framework_simplejwt.tokens.AccessToken',),&#10;}&#10;&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/VIEWS_ORGANIZATION.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/VIEWS_ORGANIZATION.md" />
              <option name="updatedContent" value="# Views Organization - Student Management System&#10;&#10;##  Project Structure&#10;&#10;```&#10;StudentManagementSystem/&#10;├── students/          # Student app&#10;│   ├── models.py      # Student, Enrollment, EnrollmentRequest models&#10;│   ├── auth_views.py  # Authentication views (register, login, logout)&#10;│   ├── views.py       # Student CRUD &amp; enrollment request views&#10;│   └── urls.py        # Student &amp; auth URL routing&#10;│&#10;├── teachers/          # Teacher app&#10;│   ├── models.py      # Teacher model&#10;│   ├── views.py       # Teacher management, approval, grades&#10;│   └── urls.py        # Teacher URL routing&#10;│&#10;├── courses/           # Courses app&#10;│   ├── models.py      # Course model&#10;│   ├── views.py       # Course listing &amp; details&#10;│   └── urls.py        # Course URL routing&#10;│&#10;└── StudentManagementSystem/&#10;    ├── settings.py    # Project settings&#10;    └── urls.py        # Main URL configuration&#10;```&#10;&#10;---&#10;&#10;##  students/auth_views.py&#10;&#10;**Purpose:** Handle user authentication and registration&#10;&#10;### Views:&#10;| View | HTTP | Endpoint | Description |&#10;|------|------|----------|-------------|&#10;| `home()` | GET | `/` | API documentation |&#10;| `register_student()` | POST | `/auth/register/student/` | Register student account |&#10;| `register_teacher()` | POST | `/auth/register/teacher/` | Register teacher account |&#10;| `user_login()` | POST | `/auth/login/` | Session-based login |&#10;| `user_logout()` | POST | `/auth/logout/` | Logout |&#10;&#10;**JWT Tokens:** Handled by `rest_framework_simplejwt` views in main urls.py&#10;&#10;---&#10;&#10;## ‍ students/views.py&#10;&#10;**Purpose:** Student CRUD operations and enrollment requests&#10;&#10;### Views:&#10;| View | HTTP | Endpoint | Description |&#10;|------|------|----------|-------------|&#10;| `student_list()` | GET | `/students/` | List all students |&#10;| `student_detail()` | GET | `/students/&lt;id&gt;/` | Get single student |&#10;| `add_student()` | POST | `/students/add/` | Add new student |&#10;| `update_student()` | PUT | `/students/&lt;id&gt;/update/` | Update student info |&#10;| `delete_student()` | DELETE | `/students/&lt;id&gt;/delete/` | Delete student |&#10;| `request_enrollment()` | POST | `/enrollment/request/` | Request course enrollment |&#10;| `my_enrollments()` | GET | `/students/&lt;id&gt;/enrollments/` | View student's courses |&#10;| `my_enrollment_requests()` | GET | `/students/&lt;id&gt;/requests/` | View student's requests |&#10;&#10;**Models Used:** Student, Enrollment, EnrollmentRequest, Course&#10;&#10;---&#10;&#10;## ‍ teachers/views.py&#10;&#10;**Purpose:** Teacher management, enrollment approval, and grade management&#10;&#10;### Views:&#10;| View | HTTP | Endpoint | Description |&#10;|------|------|----------|-------------|&#10;| `teacher_list()` | GET | `/teachers/` | List all teachers |&#10;| `teacher_detail()` | GET | `/teachers/&lt;id&gt;/` | Get single teacher |&#10;| `my_courses()` | GET | `/teachers/&lt;id&gt;/courses/` | Get teacher's courses |&#10;| `pending_requests()` | GET | `/teachers/&lt;id&gt;/requests/` | View pending enrollment requests |&#10;| `approve_request()` | POST | `/teachers/request/&lt;id&gt;/approve/` | Approve enrollment request |&#10;| `reject_request()` | POST | `/teachers/request/&lt;id&gt;/reject/` | Reject enrollment request |&#10;| `direct_enroll()` | POST | `/teachers/enroll/` | Directly enroll student |&#10;| `course_students()` | GET | `/teachers/&lt;id&gt;/courses/&lt;id&gt;/students/` | View students in course |&#10;| `update_grade()` | PUT | `/teachers/enrollment/&lt;id&gt;/grade/` | Update student grade |&#10;&#10;**Models Used:** Teacher, Student, Course, Enrollment, EnrollmentRequest&#10;&#10;**Permission Checks:** &#10;- Teachers can only manage courses assigned to them&#10;- All actions check: `if course not in teacher.courses.all()`&#10;&#10;---&#10;&#10;##  courses/views.py&#10;&#10;**Purpose:** Course catalog and enrollment information&#10;&#10;### Views:&#10;| View | HTTP | Endpoint | Description |&#10;|------|------|----------|-------------|&#10;| `course_list()` | GET | `/courses/` | List all courses |&#10;| `course_detail()` | GET | `/courses/&lt;id&gt;/` | Get course details with teachers |&#10;| `course_enrollments()` | GET | `/courses/&lt;id&gt;/enrollments/` | View all enrollments for course |&#10;&#10;**Models Used:** Course, Enrollment, Teacher&#10;&#10;---&#10;&#10;## ️ URL Routing&#10;&#10;### Main URLs (StudentManagementSystem/urls.py)&#10;```python&#10;urlpatterns = [&#10;    path('admin/', admin.site.urls),&#10;    path('auth/token/', TokenObtainPairView.as_view()),           # JWT login&#10;    path('auth/token/refresh/', TokenRefreshView.as_view()),      # Refresh token&#10;    path('', include('students.urls')),                            # Student app&#10;    path('teachers/', include('teachers.urls')),                   # Teacher app&#10;    path('courses/', include('courses.urls')),                     # Courses app&#10;]&#10;```&#10;&#10;### Students URLs (students/urls.py)&#10;```python&#10;# Authentication&#10;path('', auth_views.home)&#10;path('auth/register/student/', auth_views.register_student)&#10;path('auth/register/teacher/', auth_views.register_teacher)&#10;path('auth/login/', auth_views.user_login)&#10;path('auth/logout/', auth_views.user_logout)&#10;&#10;# Students&#10;path('students/', views.student_list)&#10;path('students/&lt;int:student_id&gt;/', views.student_detail)&#10;path('students/add/', views.add_student)&#10;path('students/&lt;int:student_id&gt;/update/', views.update_student)&#10;path('students/&lt;int:student_id&gt;/delete/', views.delete_student)&#10;&#10;# Enrollment (student perspective)&#10;path('enrollment/request/', views.request_enrollment)&#10;path('students/&lt;int:student_id&gt;/enrollments/', views.my_enrollments)&#10;path('students/&lt;int:student_id&gt;/requests/', views.my_enrollment_requests)&#10;```&#10;&#10;### Teachers URLs (teachers/urls.py)&#10;```python&#10;# Teacher info&#10;path('', views.teacher_list)&#10;path('&lt;int:teacher_id&gt;/', views.teacher_detail)&#10;path('&lt;int:teacher_id&gt;/courses/', views.my_courses)&#10;&#10;# Enrollment management&#10;path('&lt;int:teacher_id&gt;/requests/', views.pending_requests)&#10;path('request/&lt;int:request_id&gt;/approve/', views.approve_request)&#10;path('request/&lt;int:request_id&gt;/reject/', views.reject_request)&#10;path('enroll/', views.direct_enroll)&#10;&#10;# Course &amp; grade management&#10;path('&lt;int:teacher_id&gt;/courses/&lt;int:course_id&gt;/students/', views.course_students)&#10;path('enrollment/&lt;int:enrollment_id&gt;/grade/', views.update_grade)&#10;```&#10;&#10;### Courses URLs (courses/urls.py)&#10;```python&#10;path('', views.course_list)&#10;path('&lt;int:course_id&gt;/', views.course_detail)&#10;path('&lt;int:course_id&gt;/enrollments/', views.course_enrollments)&#10;```&#10;&#10;---&#10;&#10;##  Data Flow Examples&#10;&#10;### Student Enrollment Flow&#10;```&#10;1. Student browses courses:&#10;   GET /courses/&#10;   → courses/views.py → course_list()&#10;&#10;2. Student requests enrollment:&#10;   POST /enrollment/request/&#10;   Body: {student_id: 1, course_id: 1}&#10;   → students/views.py → request_enrollment()&#10;   → Creates EnrollmentRequest with status='pending'&#10;&#10;3. Teacher views requests:&#10;   GET /teachers/1/requests/&#10;   → teachers/views.py → pending_requests()&#10;   → Filters by teacher's courses&#10;&#10;4. Teacher approves:&#10;   POST /teachers/request/1/approve/&#10;   Body: {teacher_id: 1}&#10;   → teachers/views.py → approve_request()&#10;   → Updates request, creates Enrollment&#10;&#10;5. Student views enrolled courses:&#10;   GET /students/1/enrollments/&#10;   → students/views.py → my_enrollments()&#10;```&#10;&#10;### Grade Management Flow&#10;```&#10;1. Teacher views course students:&#10;   GET /teachers/1/courses/1/students/&#10;   → teachers/views.py → course_students()&#10;   → Returns list with enrollment IDs&#10;&#10;2. Teacher updates grade:&#10;   PUT /teachers/enrollment/5/grade/&#10;   Body: {teacher_id: 1, grade: &quot;A&quot;}&#10;   → teachers/views.py → update_grade()&#10;   → Updates Enrollment.grade&#10;```&#10;&#10;---&#10;&#10;##  Key Design Principles&#10;&#10;### 1. Separation of Concerns&#10;- **students/**: Student data and enrollment requests&#10;- **teachers/**: Teacher actions and approvals&#10;- **courses/**: Course catalog&#10;&#10;### 2. Permission-Based Access&#10;- Teacher views check: `if course in teacher.courses.all()`&#10;- Returns 403 Forbidden if unauthorized&#10;&#10;### 3. RESTful Design&#10;- GET: Retrieve data&#10;- POST: Create new resources&#10;- PUT: Update existing resources&#10;- DELETE: Remove resources&#10;&#10;### 4. Consistent Response Format&#10;```json&#10;{&#10;  &quot;message&quot;: &quot;Action successful&quot;,&#10;  &quot;data&quot;: {...}&#10;}&#10;```&#10;&#10;Or error:&#10;```json&#10;{&#10;  &quot;error&quot;: &quot;Error description&quot;&#10;}&#10;```&#10;&#10;---&#10;&#10;##  Complete Endpoint List&#10;&#10;### Authentication (No prefix)&#10;```&#10;GET    /                               # API home&#10;POST   /auth/register/student/         # Register student&#10;POST   /auth/register/teacher/         # Register teacher&#10;POST   /auth/login/                    # Session login&#10;POST   /auth/logout/                   # Logout&#10;POST   /auth/token/                    # Get JWT token&#10;POST   /auth/token/refresh/            # Refresh JWT token&#10;```&#10;&#10;### Students (/students/)&#10;```&#10;GET    /students/                      # List students&#10;GET    /students/&lt;id&gt;/                 # Student detail&#10;POST   /students/add/                  # Add student&#10;PUT    /students/&lt;id&gt;/update/          # Update student&#10;DELETE /students/&lt;id&gt;/delete/          # Delete student&#10;GET    /students/&lt;id&gt;/enrollments/     # Student's courses&#10;GET    /students/&lt;id&gt;/requests/        # Student's requests&#10;```&#10;&#10;### Enrollment (/)&#10;```&#10;POST   /enrollment/request/            # Request enrollment&#10;```&#10;&#10;### Teachers (/teachers/)&#10;```&#10;GET    /teachers/                      # List teachers&#10;GET    /teachers/&lt;id&gt;/                 # Teacher detail&#10;GET    /teachers/&lt;id&gt;/courses/         # Teacher's courses&#10;GET    /teachers/&lt;id&gt;/requests/        # Pending requests&#10;POST   /teachers/request/&lt;id&gt;/approve/ # Approve request&#10;POST   /teachers/request/&lt;id&gt;/reject/  # Reject request&#10;POST   /teachers/enroll/               # Direct enroll&#10;GET    /teachers/&lt;id&gt;/courses/&lt;id&gt;/students/  # Course students&#10;PUT    /teachers/enrollment/&lt;id&gt;/grade/       # Update grade&#10;```&#10;&#10;### Courses (/courses/)&#10;```&#10;GET    /courses/                       # List courses&#10;GET    /courses/&lt;id&gt;/                  # Course detail&#10;GET    /courses/&lt;id&gt;/enrollments/      # Course enrollments&#10;```&#10;&#10;---&#10;&#10;## ✅ Benefits of This Organization&#10;&#10;1. **Modularity**: Each app manages its own domain&#10;2. **Reusability**: Apps can be used in other projects&#10;3. **Maintainability**: Easy to find and update code&#10;4. **Scalability**: Can add features per app independently&#10;5. **Team Collaboration**: Different developers can work on different apps&#10;6. **Clear Responsibility**: Each view has a single, clear purpose&#10;&#10;---&#10;&#10;##  Next Steps&#10;&#10;1. Run migrations to create database tables&#10;2. Test each endpoint with Postman&#10;3. Add authentication decorators where needed&#10;4. Implement pagination for list views&#10;5. Add filtering and search capabilities&#10;6. Write unit tests for each view&#10;&#10;This organization follows Django best practices and makes your codebase professional and maintainable!&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/courses/urls.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/courses/urls.py" />
              <option name="originalContent" value="&quot;&quot;&quot;&#10;Courses app URL configuration&#10;&quot;&quot;&quot;&#10;from django.urls import path&#10;from . import views&#10;&#10;app_name = 'courses'&#10;&#10;urlpatterns = [&#10;    # Course endpoints&#10;    path('', views.course_list, name='course_list'),&#10;    path('&lt;int:course_id&gt;/', views.course_detail, name='course_detail'),&#10;    path('&lt;int:course_id&gt;/enrollments/', views.course_enrollments, name='course_enrollments'),&#10;]&#10;" />
              <option name="updatedContent" value="&quot;&quot;&quot;&#10;Courses app URL configuration&#10;&quot;&quot;&quot;&#10;from django.urls import path&#10;from . import views&#10;&#10;app_name = 'courses'&#10;&#10;urlpatterns = [&#10;    # Course endpoints&#10;    path('', views.course_list, name='course_list'),&#10;    path('&lt;int:course_id&gt;/', views.course_detail, name='course_detail'),&#10;    path('&lt;int:course_id&gt;/enrollments/', views.course_enrollments, name='course_enrollments'),&#10;]&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/requirements.txt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/requirements.txt" />
              <option name="originalContent" value="Django&gt;=5.2.8&#10;djangorestframework&gt;=3.14.0&#10;djangorestframework-simplejwt&gt;=5.3.0&#10;psycopg2-binary&gt;=2.9.0&#10;requests&gt;=2.31.0&#10;&#10;" />
              <option name="updatedContent" value="Django&gt;=5.2.8&#10;djangorestframework&gt;=3.14.0&#10;djangorestframework-simplejwt&gt;=5.3.0&#10;psycopg2-binary&gt;=2.9.0&#10;requests&gt;=2.31.0&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/students/admin.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/students/admin.py" />
              <option name="originalContent" value="from django.contrib import admin&#10;from .models import Student, Teacher, Course, Enrollment, EnrollmentRequest&#10;&#10;@admin.register(Course)&#10;class CourseAdmin(admin.ModelAdmin):&#10;    list_display = ['code', 'name', 'credits', 'created_at']&#10;    search_fields = ['name', 'code']&#10;&#10;@admin.register(Teacher)&#10;class TeacherAdmin(admin.ModelAdmin):&#10;    list_display = ['first_name', 'last_name', 'subject', 'user']&#10;    search_fields = ['first_name', 'last_name', 'subject']&#10;    filter_horizontal = ['courses']&#10;&#10;@admin.register(Student)&#10;class StudentAdmin(admin.ModelAdmin):&#10;    list_display = ['first_name', 'last_name', 'age', 'gpa', 'user']&#10;    search_fields = ['first_name', 'last_name']&#10;&#10;@admin.register(Enrollment)&#10;class EnrollmentAdmin(admin.ModelAdmin):&#10;    list_display = ['student', 'course', 'enrolled_by', 'enrollment_date', 'grade']&#10;    list_filter = ['enrollment_date', 'course']&#10;    search_fields = ['student__first_name', 'student__last_name', 'course__name']&#10;&#10;@admin.register(EnrollmentRequest)&#10;class EnrollmentRequestAdmin(admin.ModelAdmin):&#10;    list_display = ['student', 'course', 'status', 'requested_at', 'reviewed_by']&#10;    list_filter = ['status', 'requested_at']&#10;    search_fields = ['student__first_name', 'student__last_name', 'course__name']&#10;    actions = ['approve_requests', 'reject_requests']&#10;    &#10;    def approve_requests(self, request, queryset):&#10;        queryset.update(status='approved')&#10;    approve_requests.short_description = &quot;Approve selected requests&quot;&#10;    &#10;    def reject_requests(self, request, queryset):&#10;        queryset.update(status='rejected')&#10;    reject_requests.short_description = &quot;Reject selected requests&quot;&#10;" />
              <option name="updatedContent" value="from django.contrib import admin&#10;from .models import Student, Teacher, Course, Enrollment, EnrollmentRequest&#10;&#10;@admin.register(Course)&#10;class CourseAdmin(admin.ModelAdmin):&#10;    list_display = ['code', 'name', 'credits', 'created_at']&#10;    search_fields = ['name', 'code']&#10;&#10;@admin.register(Teacher)&#10;class TeacherAdmin(admin.ModelAdmin):&#10;    list_display = ['first_name', 'last_name', 'subject', 'user']&#10;    search_fields = ['first_name', 'last_name', 'subject']&#10;    filter_horizontal = ['courses']&#10;&#10;@admin.register(Student)&#10;class StudentAdmin(admin.ModelAdmin):&#10;    list_display = ['first_name', 'last_name', 'age', 'gpa', 'user']&#10;    search_fields = ['first_name', 'last_name']&#10;&#10;@admin.register(Enrollment)&#10;class EnrollmentAdmin(admin.ModelAdmin):&#10;    list_display = ['student', 'course', 'enrolled_by', 'enrollment_date', 'grade']&#10;    list_filter = ['enrollment_date', 'course']&#10;    search_fields = ['student__first_name', 'student__last_name', 'course__name']&#10;&#10;@admin.register(EnrollmentRequest)&#10;class EnrollmentRequestAdmin(admin.ModelAdmin):&#10;    list_display = ['student', 'course', 'status', 'requested_at', 'reviewed_by']&#10;    list_filter = ['status', 'requested_at']&#10;    search_fields = ['student__first_name', 'student__last_name', 'course__name']&#10;    actions = ['approve_requests', 'reject_requests']&#10;    &#10;    def approve_requests(self, request, queryset):&#10;        queryset.update(status='approved')&#10;    approve_requests.short_description = &quot;Approve selected requests&quot;&#10;    &#10;    def reject_requests(self, request, queryset):&#10;        queryset.update(status='rejected')&#10;    reject_requests.short_description = &quot;Reject selected requests&quot;&#13;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/students/models.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/students/models.py" />
              <option name="originalContent" value="from django.db import models&#10;from django.contrib.auth.models import User&#10;&#10;class Course(models.Model):&#10;    name = models.CharField(max_length=100)&#10;    code = models.CharField(max_length=20, unique=True)&#10;    description = models.TextField(blank=True)&#10;    credits = models.IntegerField(default=3)&#10;    created_at = models.DateTimeField(auto_now_add=True)&#10;    &#10;    def __str__(self):&#10;        return f'{self.code} - {self.name}'&#10;&#10;class Teacher(models.Model):&#10;    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name='teacher_profile')&#10;    first_name = models.CharField(max_length=50)&#10;    last_name = models.CharField(max_length=50)&#10;    subject = models.CharField(max_length=50)&#10;    courses = models.ManyToManyField(Course, related_name='teachers', blank=True)&#10;    created_at = models.DateTimeField(auto_now_add=True)&#10;    &#10;    def __str__(self):&#10;        return f'Teacher: {self.first_name} {self.last_name}'&#10;&#10;class Student(models.Model):&#10;    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name='student_profile')&#10;    first_name = models.CharField(max_length=50)&#10;    last_name = models.CharField(max_length=50)&#10;    age = models.IntegerField()&#10;    gpa = models.FloatField()&#10;    enrolled_courses = models.ManyToManyField(Course, through='Enrollment', related_name='enrolled_students')&#10;    created_at = models.DateTimeField(auto_now_add=True)&#10;    &#10;    def __str__(self):&#10;        return f'Student: {self.first_name} {self.last_name}'&#10;&#10;class Enrollment(models.Model):&#10;    student = models.ForeignKey(Student, on_delete=models.CASCADE, related_name='enrollments')&#10;    course = models.ForeignKey(Course, on_delete=models.CASCADE, related_name='enrollments')&#10;    enrolled_by = models.ForeignKey(Teacher, on_delete=models.SET_NULL, null=True, blank=True, related_name='students_enrolled')&#10;    enrollment_date = models.DateTimeField(auto_now_add=True)&#10;    grade = models.CharField(max_length=2, blank=True, null=True)&#10;    &#10;    class Meta:&#10;        unique_together = ['student', 'course']&#10;    &#10;    def __str__(self):&#10;        return f'{self.student} enrolled in {self.course}'&#10;&#10;class EnrollmentRequest(models.Model):&#10;    STATUS_CHOICES = [&#10;        ('pending', 'Pending'),&#10;        ('approved', 'Approved'),&#10;        ('rejected', 'Rejected'),&#10;    ]&#10;    &#10;    student = models.ForeignKey(Student, on_delete=models.CASCADE, related_name='enrollment_requests')&#10;    course = models.ForeignKey(Course, on_delete=models.CASCADE, related_name='enrollment_requests')&#10;    status = models.CharField(max_length=10, choices=STATUS_CHOICES, default='pending')&#10;    requested_at = models.DateTimeField(auto_now_add=True)&#10;    reviewed_by = models.ForeignKey(Teacher, on_delete=models.SET_NULL, null=True, blank=True, related_name='reviewed_requests')&#10;    reviewed_at = models.DateTimeField(null=True, blank=True)&#10;    notes = models.TextField(blank=True)&#10;    &#10;    class Meta:&#10;        unique_together = ['student', 'course']&#10;        ordering = ['-requested_at']&#10;    &#10;    def __str__(self):&#10;        return f'{self.student} - {self.course} ({self.status})'&#10;&#10;&#10;" />
              <option name="updatedContent" value="from django.db import models&#10;from django.contrib.auth.models import User&#10;&#10;class Course(models.Model):&#10;    name = models.CharField(max_length=100)&#10;    code = models.CharField(max_length=20, unique=True)&#10;    description = models.TextField(blank=True)&#10;    credits = models.IntegerField(default=3)&#10;    created_at = models.DateTimeField(auto_now_add=True)&#10;    &#10;    def __str__(self):&#10;        return f'{self.code} - {self.name}'&#10;&#10;class Teacher(models.Model):&#10;    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name='teacher_profile')&#10;    first_name = models.CharField(max_length=50)&#10;    last_name = models.CharField(max_length=50)&#10;    subject = models.CharField(max_length=50)&#10;    courses = models.ManyToManyField(Course, related_name='teachers', blank=True)&#10;    created_at = models.DateTimeField(auto_now_add=True)&#10;    &#10;    def __str__(self):&#10;        return f'Teacher: {self.first_name} {self.last_name}'&#10;&#10;class Student(models.Model):&#10;    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name='student_profile')&#10;    first_name = models.CharField(max_length=50)&#10;    last_name = models.CharField(max_length=50)&#10;    age = models.IntegerField()&#10;    gpa = models.FloatField()&#10;    enrolled_courses = models.ManyToManyField(Course, through='Enrollment', related_name='enrolled_students')&#10;    created_at = models.DateTimeField(auto_now_add=True)&#10;    &#10;    def __str__(self):&#10;        return f'Student: {self.first_name} {self.last_name}'&#10;&#10;class Enrollment(models.Model):&#10;    student = models.ForeignKey(Student, on_delete=models.CASCADE, related_name='enrollments')&#10;    course = models.ForeignKey(Course, on_delete=models.CASCADE, related_name='enrollments')&#10;    enrolled_by = models.ForeignKey(Teacher, on_delete=models.SET_NULL, null=True, blank=True, related_name='students_enrolled')&#10;    enrollment_date = models.DateTimeField(auto_now_add=True)&#10;    grade = models.CharField(max_length=2, blank=True, null=True)&#10;    &#10;    class Meta:&#10;        unique_together = ['student', 'course']&#10;    &#10;    def __str__(self):&#10;        return f'{self.student} enrolled in {self.course}'&#10;&#10;class EnrollmentRequest(models.Model):&#10;    STATUS_CHOICES = [&#10;        ('pending', 'Pending'),&#10;        ('approved', 'Approved'),&#10;        ('rejected', 'Rejected'),&#10;    ]&#10;    &#10;    student = models.ForeignKey(Student, on_delete=models.CASCADE, related_name='enrollment_requests')&#10;    course = models.ForeignKey(Course, on_delete=models.CASCADE, related_name='enrollment_requests')&#10;    status = models.CharField(max_length=10, choices=STATUS_CHOICES, default='pending')&#10;    requested_at = models.DateTimeField(auto_now_add=True)&#10;    reviewed_by = models.ForeignKey(Teacher, on_delete=models.SET_NULL, null=True, blank=True, related_name='reviewed_requests')&#10;    reviewed_at = models.DateTimeField(null=True, blank=True)&#10;    notes = models.TextField(blank=True)&#10;    &#10;    class Meta:&#10;        unique_together = ['student', 'course']&#10;        ordering = ['-requested_at']&#10;    &#10;    def __str__(self):&#10;        return f'{self.student} - {self.course} ({self.status})'&#10;&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/students/urls.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/students/urls.py" />
              <option name="originalContent" value="&quot;&quot;&quot;&#10;Student app URL configuration&#10;&quot;&quot;&quot;&#10;from django.urls import path&#10;from . import views, auth_views&#10;&#10;app_name = 'students'&#10;&#10;urlpatterns = [&#10;    # Authentication endpoints&#10;    path('', auth_views.home, name='home'),&#10;    path('auth/register/student/', auth_views.register_student, name='register_student'),&#10;    path('auth/register/teacher/', auth_views.register_teacher, name='register_teacher'),&#10;    path('auth/login/', auth_views.user_login, name='login'),&#10;    path('auth/logout/', auth_views.user_logout, name='logout'),&#10;    &#10;    # Student CRUD endpoints&#10;    path('students/', views.student_list, name='student_list'),&#10;    path('students/&lt;int:student_id&gt;/', views.student_detail, name='student_detail'),&#10;    path('students/add/', views.add_student, name='add_student'),&#10;    path('students/&lt;int:student_id&gt;/update/', views.update_student, name='update_student'),&#10;    path('students/&lt;int:student_id&gt;/delete/', views.delete_student, name='delete_student'),&#10;    &#10;    # Enrollment endpoints (student perspective)&#10;    path('enrollment/request/', views.request_enrollment, name='request_enrollment'),&#10;    path('students/&lt;int:student_id&gt;/enrollments/', views.my_enrollments, name='my_enrollments'),&#10;    path('students/&lt;int:student_id&gt;/requests/', views.my_enrollment_requests, name='my_requests'),&#10;]&#10;" />
              <option name="updatedContent" value="&quot;&quot;&quot;&#10;Student app URL configuration&#10;&quot;&quot;&quot;&#10;from django.urls import path&#10;from . import views, auth_views&#10;&#10;app_name = 'students'&#10;&#10;urlpatterns = [&#10;    # Authentication endpoints&#10;    path('', auth_views.home, name='home'),&#10;    path('auth/register/student/', auth_views.register_student, name='register_student'),&#10;    path('auth/register/teacher/', auth_views.register_teacher, name='register_teacher'),&#10;    path('auth/login/', auth_views.user_login, name='login'),&#10;    path('auth/logout/', auth_views.user_logout, name='logout'),&#10;    &#10;    # Student CRUD endpoints&#10;    path('students/', views.student_list, name='student_list'),&#10;    path('students/&lt;int:student_id&gt;/', views.student_detail, name='student_detail'),&#10;    path('students/add/', views.add_student, name='add_student'),&#10;    path('students/&lt;int:student_id&gt;/update/', views.update_student, name='update_student'),&#10;    path('students/&lt;int:student_id&gt;/delete/', views.delete_student, name='delete_student'),&#10;    &#10;    # Enrollment endpoints (student perspective)&#10;    path('enrollment/request/', views.request_enrollment, name='request_enrollment'),&#10;    path('students/&lt;int:student_id&gt;/enrollments/', views.my_enrollments, name='my_enrollments'),&#10;    path('students/&lt;int:student_id&gt;/requests/', views.my_enrollment_requests, name='my_requests'),&#10;]&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/teachers/models.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/teachers/models.py" />
              <option name="originalContent" value="from django.db import models&#10;from django.contrib.auth.models import User&#10;&#10;&#10;class Teacher(models.Model):&#10;    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name='teacher_profile')&#10;    first_name = models.CharField(max_length=50)&#10;    last_name = models.CharField(max_length=50)&#10;    subject = models.CharField(max_length=50)&#10;    courses = models.ManyToManyField('courses.Course', related_name='teachers', blank=True)&#10;    created_at = models.DateTimeField(auto_now_add=True)&#10;&#10;    def __str__(self):&#10;        return f'Teacher: {self.first_name} {self.last_name} ({self.subject})'&#10;" />
              <option name="updatedContent" value="from django.db import models&#10;from django.contrib.auth.models import User&#10;&#10;&#10;class Teacher(models.Model):&#10;    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name='teacher_profile')&#10;    first_name = models.CharField(max_length=50)&#10;    last_name = models.CharField(max_length=50)&#10;    subject = models.CharField(max_length=50)&#10;    courses = models.ManyToManyField('courses.Course', related_name='teachers', blank=True)&#10;    created_at = models.DateTimeField(auto_now_add=True)&#10;&#10;    def __str__(self):&#10;        return f'Teacher: {self.first_name} {self.last_name} ({self.subject})'&#13;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/teachers/urls.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/teachers/urls.py" />
              <option name="originalContent" value="&quot;&quot;&quot;&#10;Teacher app URL configuration&#10;&quot;&quot;&quot;&#10;from django.urls import path&#10;from . import views&#10;&#10;app_name = 'teachers'&#10;&#10;urlpatterns = [&#10;    # Teacher management endpoints&#10;    path('', views.teacher_list, name='teacher_list'),&#10;    path('&lt;int:teacher_id&gt;/', views.teacher_detail, name='teacher_detail'),&#10;    path('&lt;int:teacher_id&gt;/courses/', views.my_courses, name='my_courses'),&#10;    &#10;    # Enrollment request management&#10;    path('&lt;int:teacher_id&gt;/requests/', views.pending_requests, name='pending_requests'),&#10;    path('request/&lt;int:request_id&gt;/approve/', views.approve_request, name='approve_request'),&#10;    path('request/&lt;int:request_id&gt;/reject/', views.reject_request, name='reject_request'),&#10;    &#10;    # Direct enrollment&#10;    path('enroll/', views.direct_enroll, name='direct_enroll'),&#10;    &#10;    # Course management&#10;    path('&lt;int:teacher_id&gt;/courses/&lt;int:course_id&gt;/students/', views.course_students, name='course_students'),&#10;    &#10;    # Grade management&#10;    path('enrollment/&lt;int:enrollment_id&gt;/grade/', views.update_grade, name='update_grade'),&#10;]&#10;" />
              <option name="updatedContent" value="&quot;&quot;&quot;&#10;Teacher app URL configuration&#10;&quot;&quot;&quot;&#10;from django.urls import path&#10;from . import views&#10;&#10;app_name = 'teachers'&#10;&#10;urlpatterns = [&#10;    # Teacher management endpoints&#10;    path('', views.teacher_list, name='teacher_list'),&#10;    path('&lt;int:teacher_id&gt;/', views.teacher_detail, name='teacher_detail'),&#10;    path('&lt;int:teacher_id&gt;/courses/', views.my_courses, name='my_courses'),&#10;    &#10;    # Enrollment request management&#10;    path('&lt;int:teacher_id&gt;/requests/', views.pending_requests, name='pending_requests'),&#10;    path('request/&lt;int:request_id&gt;/approve/', views.approve_request, name='approve_request'),&#10;    path('request/&lt;int:request_id&gt;/reject/', views.reject_request, name='reject_request'),&#10;    &#10;    # Direct enrollment&#10;    path('enroll/', views.direct_enroll, name='direct_enroll'),&#10;    &#10;    # Course management&#10;    path('&lt;int:teacher_id&gt;/courses/&lt;int:course_id&gt;/students/', views.course_students, name='course_students'),&#10;    &#10;    # Grade management&#10;    path('enrollment/&lt;int:enrollment_id&gt;/grade/', views.update_grade, name='update_grade'),&#10;]&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/teachers/urls_new.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/teachers/urls_new.py" />
              <option name="updatedContent" value="&quot;&quot;&quot;&#10;Teacher app URL configuration&#10;&quot;&quot;&quot;&#10;from django.urls import path&#10;from . import views&#10;&#10;app_name = 'teachers'&#10;&#10;urlpatterns = [&#10;    # Teacher management endpoints&#10;    path('', views.teacher_list, name='teacher_list'),&#10;    path('&lt;int:teacher_id&gt;/', views.teacher_detail, name='teacher_detail'),&#10;    path('&lt;int:teacher_id&gt;/courses/', views.my_courses, name='my_courses'),&#10;    &#10;    # Enrollment request management&#10;    path('&lt;int:teacher_id&gt;/requests/', views.pending_requests, name='pending_requests'),&#10;    path('request/&lt;int:request_id&gt;/approve/', views.approve_request, name='approve_request'),&#10;    path('request/&lt;int:request_id&gt;/reject/', views.reject_request, name='reject_request'),&#10;    &#10;    # Direct enrollment&#10;    path('enroll/', views.direct_enroll, name='direct_enroll'),&#10;    &#10;    # Course management&#10;    path('&lt;int:teacher_id&gt;/courses/&lt;int:course_id&gt;/students/', views.course_students, name='course_students'),&#10;    &#10;    # Grade management&#10;    path('enrollment/&lt;int:enrollment_id&gt;/grade/', views.update_grade, name='update_grade'),&#10;]&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/teachers/views.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/teachers/views.py" />
              <option name="originalContent" value="&quot;&quot;&quot;&#10;Teacher-specific views&#10;Handles: enrollment approval/rejection, direct enrollment, grade management&#10;&quot;&quot;&quot;&#10;from django.http import JsonResponse&#10;from django.shortcuts import get_object_or_404&#10;from django.views.decorators.csrf import csrf_exempt&#10;from django.views.decorators.http import require_http_methods&#10;from django.utils import timezone&#10;from .models import Teacher&#10;from students.models import Student, Enrollment, EnrollmentRequest&#10;from courses.models import Course&#10;import json&#10;&#10;&#10;@require_http_methods([&quot;GET&quot;])&#10;def teacher_list(request):&#10;    &quot;&quot;&quot;Get all teachers&quot;&quot;&quot;&#10;    teachers = Teacher.objects.all().values(&#10;        'id', 'first_name', 'last_name', 'subject',&#10;        'user__username', 'user__email', 'created_at'&#10;    )&#10;    return JsonResponse(list(teachers), safe=False)&#10;&#10;&#10;@require_http_methods([&quot;GET&quot;])&#10;def teacher_detail(request, teacher_id):&#10;    &quot;&quot;&quot;Get single teacher details with their courses&quot;&quot;&quot;&#10;    teacher = get_object_or_404(Teacher, id=teacher_id)&#10;    &#10;    courses = teacher.courses.all().values('id', 'name', 'code', 'credits')&#10;    &#10;    data = {&#10;        'id': teacher.id,&#10;        'first_name': teacher.first_name,&#10;        'last_name': teacher.last_name,&#10;        'subject': teacher.subject,&#10;        'user': {&#10;            'id': teacher.user.id,&#10;            'username': teacher.user.username,&#10;            'email': teacher.user.email&#10;        },&#10;        'courses': list(courses),&#10;        'created_at': teacher.created_at&#10;    }&#10;    &#10;    return JsonResponse(data)&#10;&#10;&#10;@require_http_methods([&quot;GET&quot;])&#10;def pending_requests(request, teacher_id):&#10;    &quot;&quot;&quot;View all pending enrollment requests for teacher's courses&quot;&quot;&quot;&#10;    teacher = get_object_or_404(Teacher, id=teacher_id)&#10;    &#10;    requests = EnrollmentRequest.objects.filter(&#10;        course__in=teacher.courses.all(),&#10;        status='pending'&#10;    ).select_related('student', 'course').values(&#10;        'id',&#10;        'student__id',&#10;        'student__first_name',&#10;        'student__last_name',&#10;        'student__gpa',&#10;        'course__id',&#10;        'course__name',&#10;        'course__code',&#10;        'requested_at',&#10;        'notes'&#10;    ).order_by('-requested_at')&#10;    &#10;    return JsonResponse(list(requests), safe=False)&#10;&#10;&#10;@csrf_exempt&#10;@require_http_methods([&quot;POST&quot;])&#10;def approve_request(request, request_id):&#10;    &quot;&quot;&quot;Approve an enrollment request&quot;&quot;&quot;&#10;    try:&#10;        data = json.loads(request.body)&#10;        teacher = get_object_or_404(Teacher, id=data.get('teacher_id'))&#10;        enrollment_request = get_object_or_404(EnrollmentRequest, id=request_id)&#10;        &#10;        # Permission check&#10;        if enrollment_request.course not in teacher.courses.all():&#10;            return JsonResponse({&#10;                'error': 'You do not have permission to approve requests for this course'&#10;            }, status=403)&#10;        &#10;        # Check if already approved&#10;        if enrollment_request.status == 'approved':&#10;            return JsonResponse({'error': 'Request already approved'}, status=400)&#10;        &#10;        # Update request&#10;        enrollment_request.status = 'approved'&#10;        enrollment_request.reviewed_by = teacher&#10;        enrollment_request.reviewed_at = timezone.now()&#10;        enrollment_request.save()&#10;        &#10;        # Create enrollment&#10;        enrollment, created = Enrollment.objects.get_or_create(&#10;            student=enrollment_request.student,&#10;            course=enrollment_request.course,&#10;            defaults={'enrolled_by': teacher}&#10;        )&#10;        &#10;        return JsonResponse({&#10;            'message': 'Enrollment request approved successfully',&#10;            'enrollment_id': enrollment.id,&#10;            'student': f&quot;{enrollment_request.student.first_name} {enrollment_request.student.last_name}&quot;,&#10;            'course': enrollment_request.course.name&#10;        })&#10;        &#10;    except Exception as e:&#10;        return JsonResponse({'error': str(e)}, status=400)&#10;&#10;&#10;@csrf_exempt&#10;@require_http_methods([&quot;POST&quot;])&#10;def reject_request(request, request_id):&#10;    &quot;&quot;&quot;Reject an enrollment request&quot;&quot;&quot;&#10;    try:&#10;        data = json.loads(request.body)&#10;        teacher = get_object_or_404(Teacher, id=data.get('teacher_id'))&#10;        enrollment_request = get_object_or_404(EnrollmentRequest, id=request_id)&#10;        &#10;        # Permission check&#10;        if enrollment_request.course not in teacher.courses.all():&#10;            return JsonResponse({&#10;                'error': 'You do not have permission to reject requests for this course'&#10;            }, status=403)&#10;        &#10;        # Update request&#10;        enrollment_request.status = 'rejected'&#10;        enrollment_request.reviewed_by = teacher&#10;        enrollment_request.reviewed_at = timezone.now()&#10;        enrollment_request.notes = data.get('notes', enrollment_request.notes)&#10;        enrollment_request.save()&#10;        &#10;        return JsonResponse({&#10;            'message': 'Enrollment request rejected',&#10;            'student': f&quot;{enrollment_request.student.first_name} {enrollment_request.student.last_name}&quot;,&#10;            'course': enrollment_request.course.name,&#10;            'notes': enrollment_request.notes&#10;        })&#10;        &#10;    except Exception as e:&#10;        return JsonResponse({'error': str(e)}, status=400)&#10;&#10;&#10;@csrf_exempt&#10;@require_http_methods([&quot;POST&quot;])&#10;def direct_enroll(request):&#10;    &quot;&quot;&quot;Directly enroll a student in a course (bypass request system)&quot;&quot;&quot;&#10;    try:&#10;        data = json.loads(request.body)&#10;        &#10;        teacher = get_object_or_404(Teacher, id=data.get('teacher_id'))&#10;        student = get_object_or_404(Student, id=data.get('student_id'))&#10;        course = get_object_or_404(Course, id=data.get('course_id'))&#10;        &#10;        # Permission check&#10;        if course not in teacher.courses.all():&#10;            return JsonResponse({&#10;                'error': 'You do not have permission to enroll students in this course'&#10;            }, status=403)&#10;        &#10;        # Create enrollment&#10;        enrollment, created = Enrollment.objects.get_or_create(&#10;            student=student,&#10;            course=course,&#10;            defaults={'enrolled_by': teacher}&#10;        )&#10;        &#10;        if not created:&#10;            return JsonResponse({&#10;                'error': 'Student is already enrolled in this course'&#10;            }, status=400)&#10;        &#10;        return JsonResponse({&#10;            'message': 'Student enrolled successfully',&#10;            'enrollment_id': enrollment.id,&#10;            'student': f&quot;{student.first_name} {student.last_name}&quot;,&#10;            'course': course.name,&#10;            'enrolled_by': f&quot;{teacher.first_name} {teacher.last_name}&quot;&#10;        }, status=201)&#10;        &#10;    except Exception as e:&#10;        return JsonResponse({'error': str(e)}, status=400)&#10;&#10;&#10;@require_http_methods([&quot;GET&quot;])&#10;def course_students(request, teacher_id, course_id):&#10;    &quot;&quot;&quot;View all students enrolled in a specific course&quot;&quot;&quot;&#10;    teacher = get_object_or_404(Teacher, id=teacher_id)&#10;    course = get_object_or_404(Course, id=course_id)&#10;    &#10;    # Permission check&#10;    if course not in teacher.courses.all():&#10;        return JsonResponse({&#10;            'error': 'You do not have permission to view students in this course'&#10;        }, status=403)&#10;    &#10;    enrollments = Enrollment.objects.filter(course=course).select_related('student').values(&#10;        'id',&#10;        'student__id',&#10;        'student__first_name',&#10;        'student__last_name',&#10;        'student__age',&#10;        'student__gpa',&#10;        'enrollment_date',&#10;        'grade',&#10;        'enrolled_by__first_name',&#10;        'enrolled_by__last_name'&#10;    ).order_by('student__last_name')&#10;    &#10;    return JsonResponse({&#10;        'course': {&#10;            'id': course.id,&#10;            'name': course.name,&#10;            'code': course.code&#10;        },&#10;        'total_students': len(enrollments),&#10;        'students': list(enrollments)&#10;    }, safe=False)&#10;&#10;&#10;@csrf_exempt&#10;@require_http_methods([&quot;PUT&quot;])&#10;def update_grade(request, enrollment_id):&#10;    &quot;&quot;&quot;Update a student's grade for a course&quot;&quot;&quot;&#10;    try:&#10;        data = json.loads(request.body)&#10;        &#10;        teacher = get_object_or_404(Teacher, id=data.get('teacher_id'))&#10;        enrollment = get_object_or_404(Enrollment, id=enrollment_id)&#10;        &#10;        # Permission check&#10;        if enrollment.course not in teacher.courses.all():&#10;            return JsonResponse({&#10;                'error': 'You do not have permission to update grades for this course'&#10;            }, status=403)&#10;        &#10;        # Update grade&#10;        old_grade = enrollment.grade&#10;        enrollment.grade = data.get('grade')&#10;        enrollment.save()&#10;        &#10;        return JsonResponse({&#10;            'message': 'Grade updated successfully',&#10;            'student': f&quot;{enrollment.student.first_name} {enrollment.student.last_name}&quot;,&#10;            'course': enrollment.course.name,&#10;            'old_grade': old_grade,&#10;            'new_grade': enrollment.grade&#10;        })&#10;        &#10;    except Exception as e:&#10;        return JsonResponse({'error': str(e)}, status=400)&#10;&#10;&#10;@require_http_methods([&quot;GET&quot;])&#10;def my_courses(request, teacher_id):&#10;    &quot;&quot;&quot;Get all courses assigned to a teacher&quot;&quot;&quot;&#10;    teacher = get_object_or_404(Teacher, id=teacher_id)&#10;    &#10;    courses = teacher.courses.all().values(&#10;        'id', 'name', 'code', 'description', 'credits', 'created_at'&#10;    )&#10;    &#10;    # Add student count for each course&#10;    courses_list = []&#10;    for course in courses:&#10;        student_count = Enrollment.objects.filter(course_id=course['id']).count()&#10;        course['student_count'] = student_count&#10;        courses_list.append(course)&#10;    &#10;    return JsonResponse({&#10;        'teacher': f&quot;{teacher.first_name} {teacher.last_name}&quot;,&#10;        'subject': teacher.subject,&#10;        'total_courses': len(courses_list),&#10;        'courses': courses_list&#10;    })" />
              <option name="updatedContent" value="&quot;&quot;&quot;&#10;Teacher-specific views&#10;Handles: enrollment approval/rejection, direct enrollment, grade management&#10;&quot;&quot;&quot;&#10;from django.http import JsonResponse&#10;from django.shortcuts import get_object_or_404&#10;from django.views.decorators.csrf import csrf_exempt&#10;from django.views.decorators.http import require_http_methods&#10;from django.utils import timezone&#10;from .models import Teacher&#10;from students.models import Student, Enrollment, EnrollmentRequest&#10;from courses.models import Course&#10;import json&#10;&#10;&#10;@require_http_methods([&quot;GET&quot;])&#10;def teacher_list(request):&#10;    &quot;&quot;&quot;Get all teachers&quot;&quot;&quot;&#10;    teachers = Teacher.objects.all().values(&#10;        'id', 'first_name', 'last_name', 'subject',&#10;        'user__username', 'user__email', 'created_at'&#10;    )&#10;    return JsonResponse(list(teachers), safe=False)&#10;&#10;&#10;@require_http_methods([&quot;GET&quot;])&#10;def teacher_detail(request, teacher_id):&#10;    &quot;&quot;&quot;Get single teacher details with their courses&quot;&quot;&quot;&#10;    teacher = get_object_or_404(Teacher, id=teacher_id)&#10;    &#10;    courses = teacher.courses.all().values('id', 'name', 'code', 'credits')&#10;    &#10;    data = {&#10;        'id': teacher.id,&#10;        'first_name': teacher.first_name,&#10;        'last_name': teacher.last_name,&#10;        'subject': teacher.subject,&#10;        'user': {&#10;            'id': teacher.user.id,&#10;            'username': teacher.user.username,&#10;            'email': teacher.user.email&#10;        },&#10;        'courses': list(courses),&#10;        'created_at': teacher.created_at&#10;    }&#10;    &#10;    return JsonResponse(data)&#10;&#10;&#10;@require_http_methods([&quot;GET&quot;])&#10;def pending_requests(request, teacher_id):&#10;    &quot;&quot;&quot;View all pending enrollment requests for teacher's courses&quot;&quot;&quot;&#10;    teacher = get_object_or_404(Teacher, id=teacher_id)&#10;    &#10;    requests = EnrollmentRequest.objects.filter(&#10;        course__in=teacher.courses.all(),&#10;        status='pending'&#10;    ).select_related('student', 'course').values(&#10;        'id',&#10;        'student__id',&#10;        'student__first_name',&#10;        'student__last_name',&#10;        'student__gpa',&#10;        'course__id',&#10;        'course__name',&#10;        'course__code',&#10;        'requested_at',&#10;        'notes'&#10;    ).order_by('-requested_at')&#10;    &#10;    return JsonResponse(list(requests), safe=False)&#10;&#10;&#10;@csrf_exempt&#10;@require_http_methods([&quot;POST&quot;])&#10;def approve_request(request, request_id):&#10;    &quot;&quot;&quot;Approve an enrollment request&quot;&quot;&quot;&#10;    try:&#10;        data = json.loads(request.body)&#10;        teacher = get_object_or_404(Teacher, id=data.get('teacher_id'))&#10;        enrollment_request = get_object_or_404(EnrollmentRequest, id=request_id)&#10;        &#10;        # Permission check&#10;        if enrollment_request.course not in teacher.courses.all():&#10;            return JsonResponse({&#10;                'error': 'You do not have permission to approve requests for this course'&#10;            }, status=403)&#10;        &#10;        # Check if already approved&#10;        if enrollment_request.status == 'approved':&#10;            return JsonResponse({'error': 'Request already approved'}, status=400)&#10;        &#10;        # Update request&#10;        enrollment_request.status = 'approved'&#10;        enrollment_request.reviewed_by = teacher&#10;        enrollment_request.reviewed_at = timezone.now()&#10;        enrollment_request.save()&#10;        &#10;        # Create enrollment&#10;        enrollment, created = Enrollment.objects.get_or_create(&#10;            student=enrollment_request.student,&#10;            course=enrollment_request.course,&#10;            defaults={'enrolled_by': teacher}&#10;        )&#10;        &#10;        return JsonResponse({&#10;            'message': 'Enrollment request approved successfully',&#10;            'enrollment_id': enrollment.id,&#10;            'student': f&quot;{enrollment_request.student.first_name} {enrollment_request.student.last_name}&quot;,&#10;            'course': enrollment_request.course.name&#10;        })&#10;        &#10;    except Exception as e:&#10;        return JsonResponse({'error': str(e)}, status=400)&#10;&#10;&#10;@csrf_exempt&#10;@require_http_methods([&quot;POST&quot;])&#10;def reject_request(request, request_id):&#10;    &quot;&quot;&quot;Reject an enrollment request&quot;&quot;&quot;&#10;    try:&#10;        data = json.loads(request.body)&#10;        teacher = get_object_or_404(Teacher, id=data.get('teacher_id'))&#10;        enrollment_request = get_object_or_404(EnrollmentRequest, id=request_id)&#10;        &#10;        # Permission check&#10;        if enrollment_request.course not in teacher.courses.all():&#10;            return JsonResponse({&#10;                'error': 'You do not have permission to reject requests for this course'&#10;            }, status=403)&#10;        &#10;        # Update request&#10;        enrollment_request.status = 'rejected'&#10;        enrollment_request.reviewed_by = teacher&#10;        enrollment_request.reviewed_at = timezone.now()&#10;        enrollment_request.notes = data.get('notes', enrollment_request.notes)&#10;        enrollment_request.save()&#10;        &#10;        return JsonResponse({&#10;            'message': 'Enrollment request rejected',&#10;            'student': f&quot;{enrollment_request.student.first_name} {enrollment_request.student.last_name}&quot;,&#10;            'course': enrollment_request.course.name,&#10;            'notes': enrollment_request.notes&#10;        })&#10;        &#10;    except Exception as e:&#10;        return JsonResponse({'error': str(e)}, status=400)&#10;&#10;&#10;@csrf_exempt&#10;@require_http_methods([&quot;POST&quot;])&#10;def direct_enroll(request):&#10;    &quot;&quot;&quot;Directly enroll a student in a course (bypass request system)&quot;&quot;&quot;&#10;    try:&#10;        data = json.loads(request.body)&#10;        &#10;        teacher = get_object_or_404(Teacher, id=data.get('teacher_id'))&#10;        student = get_object_or_404(Student, id=data.get('student_id'))&#10;        course = get_object_or_404(Course, id=data.get('course_id'))&#10;        &#10;        # Permission check&#10;        if course not in teacher.courses.all():&#10;            return JsonResponse({&#10;                'error': 'You do not have permission to enroll students in this course'&#10;            }, status=403)&#10;        &#10;        # Create enrollment&#10;        enrollment, created = Enrollment.objects.get_or_create(&#10;            student=student,&#10;            course=course,&#10;            defaults={'enrolled_by': teacher}&#10;        )&#10;        &#10;        if not created:&#10;            return JsonResponse({&#10;                'error': 'Student is already enrolled in this course'&#10;            }, status=400)&#10;        &#10;        return JsonResponse({&#10;            'message': 'Student enrolled successfully',&#10;            'enrollment_id': enrollment.id,&#10;            'student': f&quot;{student.first_name} {student.last_name}&quot;,&#10;            'course': course.name,&#10;            'enrolled_by': f&quot;{teacher.first_name} {teacher.last_name}&quot;&#10;        }, status=201)&#10;        &#10;    except Exception as e:&#10;        return JsonResponse({'error': str(e)}, status=400)&#10;&#10;&#10;@require_http_methods([&quot;GET&quot;])&#10;def course_students(request, teacher_id, course_id):&#10;    &quot;&quot;&quot;View all students enrolled in a specific course&quot;&quot;&quot;&#10;    teacher = get_object_or_404(Teacher, id=teacher_id)&#10;    course = get_object_or_404(Course, id=course_id)&#10;    &#10;    # Permission check&#10;    if course not in teacher.courses.all():&#10;        return JsonResponse({&#10;            'error': 'You do not have permission to view students in this course'&#10;        }, status=403)&#10;    &#10;    enrollments = Enrollment.objects.filter(course=course).select_related('student').values(&#10;        'id',&#10;        'student__id',&#10;        'student__first_name',&#10;        'student__last_name',&#10;        'student__age',&#10;        'student__gpa',&#10;        'enrollment_date',&#10;        'grade',&#10;        'enrolled_by__first_name',&#10;        'enrolled_by__last_name'&#10;    ).order_by('student__last_name')&#10;    &#10;    return JsonResponse({&#10;        'course': {&#10;            'id': course.id,&#10;            'name': course.name,&#10;            'code': course.code&#10;        },&#10;        'total_students': len(enrollments),&#10;        'students': list(enrollments)&#10;    }, safe=False)&#10;&#10;&#10;@csrf_exempt&#10;@require_http_methods([&quot;PUT&quot;])&#10;def update_grade(request, enrollment_id):&#10;    &quot;&quot;&quot;Update a student's grade for a course&quot;&quot;&quot;&#10;    try:&#10;        data = json.loads(request.body)&#10;        &#10;        teacher = get_object_or_404(Teacher, id=data.get('teacher_id'))&#10;        enrollment = get_object_or_404(Enrollment, id=enrollment_id)&#10;        &#10;        # Permission check&#10;        if enrollment.course not in teacher.courses.all():&#10;            return JsonResponse({&#10;                'error': 'You do not have permission to update grades for this course'&#10;            }, status=403)&#10;        &#10;        # Update grade&#10;        old_grade = enrollment.grade&#10;        enrollment.grade = data.get('grade')&#10;        enrollment.save()&#10;        &#10;        return JsonResponse({&#10;            'message': 'Grade updated successfully',&#10;            'student': f&quot;{enrollment.student.first_name} {enrollment.student.last_name}&quot;,&#10;            'course': enrollment.course.name,&#10;            'old_grade': old_grade,&#10;            'new_grade': enrollment.grade&#10;        })&#10;        &#10;    except Exception as e:&#10;        return JsonResponse({'error': str(e)}, status=400)&#10;&#10;&#10;@require_http_methods([&quot;GET&quot;])&#10;def my_courses(request, teacher_id):&#10;    &quot;&quot;&quot;Get all courses assigned to a teacher&quot;&quot;&quot;&#10;    teacher = get_object_or_404(Teacher, id=teacher_id)&#10;    &#10;    courses = teacher.courses.all().values(&#10;        'id', 'name', 'code', 'description', 'credits', 'created_at'&#10;    )&#10;    &#10;    # Add student count for each course&#10;    courses_list = []&#10;    for course in courses:&#10;        student_count = Enrollment.objects.filter(course_id=course['id']).count()&#10;        course['student_count'] = student_count&#10;        courses_list.append(course)&#10;    &#10;    return JsonResponse({&#10;        'teacher': f&quot;{teacher.first_name} {teacher.last_name}&quot;,&#10;        'subject': teacher.subject,&#10;        'total_courses': len(courses_list),&#10;        'courses': courses_list&#10;    })" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>